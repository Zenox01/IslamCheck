{"version":3,"file":"intl-relativetimeformat.min.js","sources":["../../lib/types.js","../../../intl-utils/lib/locale-lookup.js","../../lib/core.js","../../lib/index.js","../../lib/en.js"],"sourcesContent":["export var VALID_UNITS = [\n    'second',\n    'minute',\n    'hour',\n    'day',\n    'week',\n    'month',\n    'quarter',\n    'year',\n    'seconds',\n    'minutes',\n    'hours',\n    'days',\n    'weeks',\n    'months',\n    'quarters',\n    'years',\n];\n","export function resolveSupportedLocales(locales, localeData, aliases) {\n    if (aliases === void 0) { aliases = {}; }\n    var resolvedLocales = (Array.isArray(locales) ? locales : [locales])\n        .filter(function (s) { return typeof s === 'string'; })\n        .map(function (l) { return aliases[l] || l; });\n    var i, len, localeParts, data;\n    var supportedLocales = [];\n    // Using the set of locales + the default locale, we look for the first one\n    // which that has been registered. When data does not exist for a locale, we\n    // traverse its ancestors to find something that's been registered within\n    // its hierarchy of locales. Since we lack the proper `parentLocale` data\n    // here, we must take a naive approach to traversal.\n    for (i = 0, len = resolvedLocales.length; i < len; i += 1) {\n        localeParts = resolvedLocales[i].toLowerCase().split('-');\n        while (localeParts.length) {\n            if (localeData) {\n                data = localeData[localeParts.join('-')];\n                if (data) {\n                    // Return the normalized locale string; e.g., we return \"en-US\",\n                    // instead of \"en-us\".\n                    supportedLocales.push(data.locale);\n                    break;\n                }\n                localeParts.pop();\n            }\n        }\n    }\n    return supportedLocales;\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { VALID_UNITS, } from './types';\nimport { resolveSupportedLocales } from '@formatjs/intl-utils';\n/**\n * Find the correct field data in our CLDR data\n * @param locale locale\n */\nfunction findFields(locale) {\n    var localeData = RelativeTimeFormat.__localeData__;\n    var data = localeData[locale.toLowerCase()];\n    // The locale data is de-duplicated, so we have to traverse the locale's\n    // hierarchy until we find `fields` to return.\n    while (data) {\n        if (data.fields) {\n            return data.fields;\n        }\n        data = data.parentLocale\n            ? localeData[data.parentLocale.toLowerCase()]\n            : undefined;\n    }\n    throw new Error(\"Locale data added to RelativeTimeFormat is missing 'fields' for \\\"\" + locale + \"\\\"\");\n}\nfunction findFieldData(fields, unit, style) {\n    if (style == 'long') {\n        return fields[unit];\n    }\n    if (style == 'narrow') {\n        return (fields[unit + \"-narrow\"] ||\n            fields[unit + \"-short\"]);\n    }\n    return fields[unit + \"-short\"];\n}\nfunction objectIs(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\nfunction resolvePastOrFuture(value) {\n    return objectIs(value, -0)\n        ? 'past'\n        : objectIs(value, +0)\n            ? 'future'\n            : value < 0\n                ? 'past'\n                : 'future';\n}\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof RelativeTimeFormat)) {\n        throw new TypeError(\"Method Intl.RelativeTimeFormat.prototype.\" + method + \" called on incompatible receiver \" + String(instance));\n    }\n}\nfunction validateUnit(unit) {\n    // `unit + ''` to guard against `Symbol()`\n    if (!~VALID_UNITS.indexOf(unit + '')) {\n        throw new RangeError(\"Invalid unit argument for format() '\" + String(unit) + \"'\");\n    }\n    var resolvedUnit = (unit[unit.length - 1] === 's'\n        ? unit.slice(0, unit.length - 1)\n        : unit);\n    return resolvedUnit;\n}\nfunction validateValue(value, method) {\n    if (method === void 0) { method = 'format'; }\n    var parsedValue = typeof value === 'string' ? new Number(value).valueOf() : value;\n    if (!isFinite(parsedValue)) {\n        throw new RangeError(\"Value need to be finite number for Intl.RelativeTimeFormat.prototype.\" + method + \"()\");\n    }\n    return parsedValue;\n}\nfunction isString(s) {\n    return !!s;\n}\nfunction toObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nfunction getOption(opts, prop, type, values, fallback) {\n    // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = new Boolean(value);\n        }\n        if (type === 'string') {\n            value = new String(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" in not within \" + values);\n        }\n        return value;\n    }\n    return fallback;\n}\nfunction intersection(arr1, arr2) {\n    return arr1.filter(function (s) { return ~arr2.indexOf(s); });\n}\nvar DEFAULT_LOCALE = new Intl.NumberFormat().resolvedOptions().locale;\nvar RelativeTimeFormat = /** @class */ (function () {\n    function RelativeTimeFormat() {\n        var _a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _a[_i] = arguments[_i];\n        }\n        var locales = _a[0], options = _a[1];\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof RelativeTimeFormat ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.RelativeTimeFormat must be called with 'new'\");\n        }\n        var opts = options === undefined ? Object.create(null) : toObject(options);\n        if (locales === undefined) {\n            this._locale = DEFAULT_LOCALE;\n        }\n        else {\n            var resolvedLocales = resolveSupportedLocales(intersection(Intl.NumberFormat.supportedLocalesOf(locales), Intl.PluralRules.supportedLocalesOf(locales)).concat([\n                DEFAULT_LOCALE,\n            ]), RelativeTimeFormat.__localeData__, RelativeTimeFormat.__languageAliases__);\n            if (resolvedLocales.length < 1) {\n                throw new Error('No locale data has been added to IntlRelativeTimeFormat for: ' +\n                    resolvedLocales.join(', ') +\n                    ', or the default locale: ' +\n                    DEFAULT_LOCALE);\n            }\n            this._locale = resolvedLocales[0];\n        }\n        this._localeMatcher = getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        this._style = getOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n        this._numeric = getOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n        this._fields = findFields(this._locale);\n        this._nf = new Intl.NumberFormat(this._locale);\n        this._pl = new Intl.PluralRules(this._locale);\n        this._numberingSystem = this._nf.resolvedOptions().numberingSystem;\n    }\n    RelativeTimeFormat.prototype.format = function (value, unit) {\n        validateInstance(this, 'format');\n        var resolvedUnit = validateUnit(unit);\n        var parsedValue = validateValue(value);\n        var _a = this, style = _a._style, numeric = _a._numeric;\n        var fieldData = findFieldData(this._fields, resolvedUnit, style);\n        if (!fieldData) {\n            throw new Error(\"Unsupported unit \" + unit);\n        }\n        var relative = fieldData.relative, relativeTime = fieldData.relativeTime;\n        var result = '';\n        // We got a match for things like yesterday\n        if (numeric == 'auto' &&\n            (result = relative[String(parsedValue)] || '')) {\n            return result;\n        }\n        var selector = this._pl.select(parsedValue);\n        var futureOrPastData = relativeTime[resolvePastOrFuture(parsedValue)];\n        var msg = futureOrPastData[selector] || futureOrPastData.other;\n        return msg.replace(/\\{0\\}/, this._nf.format(Math.abs(parsedValue)));\n    };\n    RelativeTimeFormat.prototype.formatToParts = function (value, unit) {\n        validateInstance(this, 'format');\n        var resolvedUnit = validateUnit(unit);\n        var parsedValue = validateValue(value, 'formatToParts');\n        var _a = this, style = _a._style, numeric = _a._numeric;\n        var fieldData = findFieldData(this._fields, resolvedUnit, style);\n        if (!fieldData) {\n            throw new Error(\"Unsupported unit \" + unit);\n        }\n        var relative = fieldData.relative, relativeTime = fieldData.relativeTime;\n        var result = '';\n        // We got a match for things like yesterday\n        if (numeric == 'auto' &&\n            (result = relative[String(parsedValue)] || '')) {\n            return [\n                {\n                    type: 'literal',\n                    value: result,\n                },\n            ];\n        }\n        var selector = this._pl.select(parsedValue);\n        var futureOrPastData = relativeTime[resolvePastOrFuture(parsedValue)];\n        var msg = futureOrPastData[selector] || futureOrPastData.other;\n        var valueParts = this._nf\n            .formatToParts(Math.abs(parsedValue))\n            .map(function (p) { return (__assign({}, p, { unit: resolvedUnit })); });\n        return msg\n            .split(/(\\{0\\})/)\n            .filter(isString)\n            .reduce(function (parts, str) { return parts.concat((str === '{0}'\n            ? valueParts\n            : [{ type: 'literal', value: str }])); }, []);\n    };\n    RelativeTimeFormat.prototype.resolvedOptions = function () {\n        validateInstance(this, 'resolvedOptions');\n        // test262/test/intl402/RelativeTimeFormat/prototype/resolvedOptions/type.js\n        var opts = Object.create(Object.prototype);\n        Object.defineProperties(opts, {\n            locale: {\n                value: this._locale,\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n            style: {\n                value: this._style.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n            numeric: {\n                value: this._numeric.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n            numberingSystem: {\n                value: this._numberingSystem.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n        });\n        return opts;\n    };\n    RelativeTimeFormat.prototype.toString = function () {\n        return '[object Intl.RelativeTimeFormat]';\n    };\n    RelativeTimeFormat.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var datum = data_1[_a];\n            if (!(datum && datum.locale)) {\n                throw new Error('Locale data provided to RelativeTimeFormat is missing a ' +\n                    '`locale` property value');\n            }\n            RelativeTimeFormat.__localeData__[datum.locale.toLowerCase()] = datum;\n        }\n    };\n    RelativeTimeFormat.__setLanguageAliases = function (aliases) {\n        RelativeTimeFormat.__languageAliases__ = aliases;\n    };\n    RelativeTimeFormat.supportedLocalesOf = function (locales) {\n        var _a = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            _a[_i - 1] = arguments[_i];\n        }\n        var opts = _a[0];\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/options-toobject.js\n        var localeMatcher = 'best fit';\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/options-null.js\n        if (opts === null) {\n            throw new TypeError('opts cannot be null');\n        }\n        if (opts) {\n            localeMatcher = getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        }\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/result-type.js\n        return resolveSupportedLocales(intersection(Intl.NumberFormat.supportedLocalesOf(locales, { localeMatcher: localeMatcher }), Intl.PluralRules.supportedLocalesOf(locales, { localeMatcher: localeMatcher })).slice(), RelativeTimeFormat.__localeData__, RelativeTimeFormat.__languageAliases__);\n    };\n    RelativeTimeFormat.__localeData__ = {};\n    RelativeTimeFormat.__languageAliases__ = {};\n    RelativeTimeFormat.polyfilled = true;\n    return RelativeTimeFormat;\n}());\nexport default RelativeTimeFormat;\n","import IntlRelativeTimeFormat from './core';\nimport defaultLocale from './en';\nIntlRelativeTimeFormat.__addLocaleData(defaultLocale);\nexport * from './core';\nexport * from './types';\nexport default IntlRelativeTimeFormat;\n","/* @generated */\n// prettier-ignore  \nexport default { \"locale\": \"en\", \"fields\": { \"year\": { \"displayName\": \"year\", \"relative\": { \"0\": \"this year\", \"1\": \"next year\", \"-1\": \"last year\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} year\", \"other\": \"in {0} years\" }, \"past\": { \"one\": \"{0} year ago\", \"other\": \"{0} years ago\" } } }, \"year-short\": { \"displayName\": \"yr.\", \"relative\": { \"0\": \"this yr.\", \"1\": \"next yr.\", \"-1\": \"last yr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} yr.\", \"other\": \"in {0} yr.\" }, \"past\": { \"one\": \"{0} yr. ago\", \"other\": \"{0} yr. ago\" } } }, \"year-narrow\": { \"displayName\": \"yr.\", \"relative\": { \"0\": \"this yr.\", \"1\": \"next yr.\", \"-1\": \"last yr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} yr.\", \"other\": \"in {0} yr.\" }, \"past\": { \"one\": \"{0} yr. ago\", \"other\": \"{0} yr. ago\" } } }, \"quarter\": { \"displayName\": \"quarter\", \"relative\": { \"0\": \"this quarter\", \"1\": \"next quarter\", \"-1\": \"last quarter\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} quarter\", \"other\": \"in {0} quarters\" }, \"past\": { \"one\": \"{0} quarter ago\", \"other\": \"{0} quarters ago\" } } }, \"quarter-short\": { \"displayName\": \"qtr.\", \"relative\": { \"0\": \"this qtr.\", \"1\": \"next qtr.\", \"-1\": \"last qtr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} qtr.\", \"other\": \"in {0} qtrs.\" }, \"past\": { \"one\": \"{0} qtr. ago\", \"other\": \"{0} qtrs. ago\" } } }, \"quarter-narrow\": { \"displayName\": \"qtr.\", \"relative\": { \"0\": \"this qtr.\", \"1\": \"next qtr.\", \"-1\": \"last qtr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} qtr.\", \"other\": \"in {0} qtrs.\" }, \"past\": { \"one\": \"{0} qtr. ago\", \"other\": \"{0} qtrs. ago\" } } }, \"month\": { \"displayName\": \"month\", \"relative\": { \"0\": \"this month\", \"1\": \"next month\", \"-1\": \"last month\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} month\", \"other\": \"in {0} months\" }, \"past\": { \"one\": \"{0} month ago\", \"other\": \"{0} months ago\" } } }, \"month-short\": { \"displayName\": \"mo.\", \"relative\": { \"0\": \"this mo.\", \"1\": \"next mo.\", \"-1\": \"last mo.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} mo.\", \"other\": \"in {0} mo.\" }, \"past\": { \"one\": \"{0} mo. ago\", \"other\": \"{0} mo. ago\" } } }, \"month-narrow\": { \"displayName\": \"mo.\", \"relative\": { \"0\": \"this mo.\", \"1\": \"next mo.\", \"-1\": \"last mo.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} mo.\", \"other\": \"in {0} mo.\" }, \"past\": { \"one\": \"{0} mo. ago\", \"other\": \"{0} mo. ago\" } } }, \"week\": { \"displayName\": \"week\", \"relative\": { \"0\": \"this week\", \"1\": \"next week\", \"-1\": \"last week\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} week\", \"other\": \"in {0} weeks\" }, \"past\": { \"one\": \"{0} week ago\", \"other\": \"{0} weeks ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"week-short\": { \"displayName\": \"wk.\", \"relative\": { \"0\": \"this wk.\", \"1\": \"next wk.\", \"-1\": \"last wk.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} wk.\", \"other\": \"in {0} wk.\" }, \"past\": { \"one\": \"{0} wk. ago\", \"other\": \"{0} wk. ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"week-narrow\": { \"displayName\": \"wk.\", \"relative\": { \"0\": \"this wk.\", \"1\": \"next wk.\", \"-1\": \"last wk.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} wk.\", \"other\": \"in {0} wk.\" }, \"past\": { \"one\": \"{0} wk. ago\", \"other\": \"{0} wk. ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"day\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"day-short\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"day-narrow\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"hour\": { \"displayName\": \"hour\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hour\", \"other\": \"in {0} hours\" }, \"past\": { \"one\": \"{0} hour ago\", \"other\": \"{0} hours ago\" } } }, \"hour-short\": { \"displayName\": \"hr.\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hr.\", \"other\": \"in {0} hr.\" }, \"past\": { \"one\": \"{0} hr. ago\", \"other\": \"{0} hr. ago\" } } }, \"hour-narrow\": { \"displayName\": \"hr.\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hr.\", \"other\": \"in {0} hr.\" }, \"past\": { \"one\": \"{0} hr. ago\", \"other\": \"{0} hr. ago\" } } }, \"minute\": { \"displayName\": \"minute\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} minute\", \"other\": \"in {0} minutes\" }, \"past\": { \"one\": \"{0} minute ago\", \"other\": \"{0} minutes ago\" } } }, \"minute-short\": { \"displayName\": \"min.\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} min.\", \"other\": \"in {0} min.\" }, \"past\": { \"one\": \"{0} min. ago\", \"other\": \"{0} min. ago\" } } }, \"minute-narrow\": { \"displayName\": \"min.\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} min.\", \"other\": \"in {0} min.\" }, \"past\": { \"one\": \"{0} min. ago\", \"other\": \"{0} min. ago\" } } }, \"second\": { \"displayName\": \"second\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} second\", \"other\": \"in {0} seconds\" }, \"past\": { \"one\": \"{0} second ago\", \"other\": \"{0} seconds ago\" } } }, \"second-short\": { \"displayName\": \"sec.\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} sec.\", \"other\": \"in {0} sec.\" }, \"past\": { \"one\": \"{0} sec. ago\", \"other\": \"{0} sec. ago\" } } }, \"second-narrow\": { \"displayName\": \"sec.\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} sec.\", \"other\": \"in {0} sec.\" }, \"past\": { \"one\": \"{0} sec. ago\", \"other\": \"{0} sec. ago\" } } } } };\n"],"names":["VALID_UNITS","resolveSupportedLocales","locales","localeData","aliases","i","len","localeParts","data","resolvedLocales","Array","isArray","filter","s","map","l","supportedLocales","length","toLowerCase","split","join","push","locale","pop","__assign","Object","assign","t","n","arguments","p","prototype","hasOwnProperty","call","apply","this","findFieldData","fields","unit","style","objectIs","x","y","is","resolvePastOrFuture","value","validateInstance","instance","method","RelativeTimeFormat","TypeError","String","validateUnit","indexOf","RangeError","slice","validateValue","parsedValue","Number","valueOf","isFinite","isString","getOption","opts","prop","type","values","fallback","undefined","Boolean","val","intersection","arr1","arr2","DEFAULT_LOCALE","Intl","NumberFormat","resolvedOptions","format","resolvedUnit","_style","numeric","_numeric","fieldData","_fields","Error","relative","relativeTime","result","selector","_pl","select","futureOrPastData","other","replace","_nf","Math","abs","formatToParts","msg","valueParts","reduce","parts","str","concat","create","defineProperties","_locale","writable","enumerable","configurable","numberingSystem","_numberingSystem","toString","__addLocaleData","_i","_a","data_1","datum","__localeData__","__setLanguageAliases","__languageAliases__","supportedLocalesOf","localeMatcher","PluralRules","polyfilled","options","constructor","arg","toObject","_localeMatcher","parentLocale","findFields","year","displayName","0","1","-1","future","one","past","year-short","year-narrow","quarter","quarter-short","quarter-narrow","month","month-short","month-narrow","week","relativePeriod","week-short","week-narrow","day","day-short","day-narrow","hour","hour-short","hour-narrow","minute","minute-short","minute-narrow","second","second-short","second-narrow"],"mappings":"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"}