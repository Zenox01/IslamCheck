{"version":3,"sources":["webpack://cassetteCore/webpack/universalModuleDefinition","webpack://cassetteCore/webpack/bootstrap","webpack://cassetteCore/external {\"root\":\"PropTypes\",\"commonjs\":\"prop-types\",\"commonjs2\":\"prop-types\",\"amd\":\"prop-types\"}","webpack://cassetteCore/external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://cassetteCore/./src/utils/console.js","webpack://cassetteCore/./src/utils/createSingleGlobalContext.js","webpack://cassetteCore/./node_modules/array-find-index/index.js","webpack://cassetteCore/(webpack)/buildin/global.js","webpack://cassetteCore/./src/PlayerContext.js","webpack://cassetteCore/./src/GroupContext.js","webpack://cassetteCore/./src/constants.js","webpack://cassetteCore/./src/PlayerPropTypes.js","webpack://cassetteCore/./src/factories/createCustomMediaElement.js","webpack://cassetteCore/./src/utils/ShuffleManager.js","webpack://cassetteCore/./src/utils/isPlaylistValid.js","webpack://cassetteCore/./src/utils/getTrackSources.js","webpack://cassetteCore/./src/utils/findTrackIndexByUrl.js","webpack://cassetteCore/./src/utils/snapshot.js","webpack://cassetteCore/./src/utils/getSourceList.js","webpack://cassetteCore/./src/utils/getTimeRangesArray.js","webpack://cassetteCore/./src/utils/getRepeatStrategy.js","webpack://cassetteCore/./src/utils/convertToNumberWithinIntervalBounds.js","webpack://cassetteCore/./src/utils/getDisplayText.js","webpack://cassetteCore/./src/utils/parseTimeString.js","webpack://cassetteCore/./src/utils/getInitialDuration.js","webpack://cassetteCore/./src/PlayerContextProvider.js","webpack://cassetteCore/./src/utils/getReactParentNameStack.js","webpack://cassetteCore/./src/PlayerContextConsumer.js","webpack://cassetteCore/./src/PlayerContextGroup.js","webpack://cassetteCore/./src/FullscreenContext.js","webpack://cassetteCore/./src/FullscreenContextProvider.js","webpack://cassetteCore/./src/playerContextFilter.js","webpack://cassetteCore/./src/index.js"],"names":["log","console","bind","logError","error","logWarning","warn","packageVersion","version","_global","window","global","__cassette_contexts__","createSingleGlobalContext","displayName","defaultValue","keysWillUpdate","ExistingContext","flags","i","key","Context","getChangedBits","prev","next","mask","__cassetteGetObservedBits","keys","observedBits","repeatStrategyOptions","MEDIA_ERR_NETWORK","requiredOnlyUnlessHasProp","propType","altPropName","warnedAboutDefiningBoth","validate","props","propName","componentName","rest","isRequired","Error","controlKeyword","oneOf","control","oneOfType","func","crossOriginAttribute","mediaSource","shape","src","string","type","mediaSessionAction","mediaSessionArtwork","sizes","url","sources","arrayOf","title","artist","album","artwork","duration","number","startingTime","isUnboundedStream","bool","meta","object","seekMode","loopchange","srcrequest","createCustomMediaElement","media","MutationObserver","dispatchEvent","Event","observe","attributes","attributeFilter","Object","defineProperty","get","currentSrc","set","e","srcRequested","ShuffleManager","list","options","_list","_forwardStack","_backStack","_currentItem","undefined","_allowBackShuffle","Boolean","allowBackShuffle","findNextItem","currentIndex","setCurrentIndex","_findNextItem","findPreviousItem","pickNextItem","index","push","length","setList","setOptions","o","item","clear","_goForward","n","forwardStack","backStack","currentItem","pop","_allItemsMatch","allowMore","indexOf","nextItem","Math","floor","random","isPlaylistValid","playlist","blankSources","getTrackSources","findTrackIndexByUrl","track","source","veryLongKey","versionKey","migrations","oldSnapshot","__unstable__","getStateSnapshot","state","paused","currentTime","activeTrackIndex","volume","muted","loop","cycle","shuffle","playbackRate","__playlist__","Infinity","activeTrackSrc","restoreStateFromSnapshot","snapshot","migratedSnapshot","slice","reduce","migration","restoredStateValues","awaitingPlay","useCurrentTime","newTrackIndex","getSourceList","map","_","getTimeRangesArray","timeRangesObj","timeRangesArray","Array","start","end","getRepeatStrategy","convertToNumberWithinIntervalBounds","min","max","getDisplayText","parseTimeString","str","seconds","factor","times","split","parseInt","getInitialDuration","playErrorHandler","err","name","warningMessage","Date","toLocaleTimeString","supportableMediaSessionActions","defaultState","seekPreviewTime","seekInProgress","awaitingResumeOnSeekComplete","awaitingPlayAfterTrackLoad","bufferedRanges","playedRanges","seekableRanges","stalled","shouldRequestPlayOnNextUpdate","mediaCannotPlay","maxKnownTime","getGoToTrackState","prevState","shouldPlay","shouldForceLoad","isNewTrack","shouldLoadAsNew","trackLoading","awaitingForceLoad","startingTrackIndex","playlistIsValid","initialStateSnapshot","restoredStateFromSnapshot","a","c","JSON","stringify","defaultVolume","defaultMuted","defaultRepeatStrategy","defaultShuffle","defaultPlaybackRate","setVolumeInProgress","autoplay","lastStableVolume","shuffler","videoHostElementList","videoHostOccupiedCallbacks","Map","videoHostVacatedCallbacks","handleTrackPlaybackFailure","handlePlayerOnlineAfterFailure","togglePause","selectTrackIndex","forwardSkip","backSkip","seekPreview","seekComplete","setVolume","setVolumeComplete","toggleMuted","toggleShuffle","setRepeatStrategy","setPlaybackRate","registerVideoHostElement","renderVideoIntoHostElement","unregisterVideoHostElement","updateVideoHostElement","handleMediaPlay","handleMediaPause","handleMediaSrcrequest","handleMediaEnded","handleMediaEmptied","handleMediaStalled","handleMediaCanplaythrough","handleMediaCanplay","handleMediaTimeupdate","handleMediaLoadeddata","handleMediaVolumechange","handleMediaDurationchange","handleMediaProgress","handleMediaLoopchange","handleMediaRatechange","componentDidMount","createMediaElement","crossOrigin","autoplayDelayInSeconds","mediaElementRef","getPosterImageForTrack","getMediaTitleAttributeForTrack","onActiveTrackUpdate","setAttribute","addEventListener","setMediaElementSources","mediaContainer","appendChild","setState","delayTimeout","setTimeout","trackIndex","previousTrack","previousTrackIndex","getDerivedStateFromProps","nextProps","newPlaylist","baseNewState","prevSources","currentSources","componentDidUpdate","prevProps","newSources","prevTrack","newTrack","removeEventListener","stealMediaSession","clearTimeout","snapshotUpdateTimeout","onStateSnapshot","componentWillUnmount","sourceElements","querySelectorAll","sourceElement","gapLengthTimeout","MediaSession","navigator","mediaSession","metadata","MediaMetadata","action","supportedMediaSessionActions","seekLength","mediaSessionSeekLengthInSeconds","forEach","handler","setActionHandler","firstChild","removeChild","document","createElement","load","reloadActiveTrack","goToTrack","event","target","code","onLine","onTrackPlaybackFailure","hostElement","onHostOccupied","onHostVacated","concat","cancelAnimationFrame","videoHostUpdateRaf","requestAnimationFrame","filter","elem","delete","parentNode","playing","oldHostElement","play","onVacated","onOccupied","s","loadFirstTrackOnPlaylistComplete","gapLengthInSeconds","played","onTimeUpdate","activeTrack","activeTrackAtLastDurationChange","buffered","seekable","value","pause","playPromise","catch","Promise","reject","args","stayOnBackSkipThreshold","previousItem","targetTime","baseStateUpdate","ended","isNaN","inProgress","volumeInBounds","repeatStrategy","rate","getControlProps","playerContext","awaitingPlayResume","onTogglePause","onSelectTrackIndex","onBackSkip","onForwardSkip","onSeekPreview","onSeekComplete","onSetVolume","onSetVolumeComplete","onToggleMuted","onToggleShuffle","onSetRepeatStrategy","onSetPlaybackRate","render","children","propTypes","maintainPlaybackRate","node","defaultProps","groupContext","registerMediaElement","mediaElement","unregisterMediaElement","groupProps","ref","PlayerContextGroupConsumer","getReactParentNameStack","componentInstance","fiber","_reactInternalFiber","parentStack","owner","_debugOwner","filterList","warnedAboutFilterList","warning","parentName","usedContext","hasOwnProperty","enforceOneMediaSourceOnly","mediaElements","element","fullscreen","requestFullscreen","requestExitFullscreen","fullscreenStyle","width","height","handleFullscreenChange","fullscreenElement","fullscreenEnabled","webkitRequestFullscreen","mozRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen","mozExitFullscreen","documentFullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","getFullscreenContext","fullscreenContext","playerContextFilter","component","contextPropNames","warned","childName","PlayerContextFilter","childProps","FullscreenContextConsumer","Consumer","donotuse_PlayerContext","donotuse_FullscreenContext"],"mappings":"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","file":"es5/cassette-core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"prop-types\"), require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"prop-types\", \"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cassetteCore\"] = factory(require(\"prop-types\"), require(\"react\"));\n\telse\n\t\troot[\"cassetteCore\"] = factory(root[\"PropTypes\"], root[\"React\"]);\n})((typeof self !== \"undefined\" ? self : this), function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/* eslint-disable no-console */\n\nconst log = console.log.bind(console);\n\nexport const logError = console.error ? console.error.bind(console) : log;\nexport const logWarning = console.warn ? console.warn.bind(console) : log;\n","import { createContext } from 'react';\n\nimport { logWarning } from './console';\n\nconst packageVersion = require('../../package.json').version;\n\nconst _global = typeof window === 'undefined' ? global : window;\n_global.__cassette_contexts__ = _global.__cassette_contexts__ || {};\n\nfunction createSingleGlobalContext({\n  displayName,\n  defaultValue = null,\n  keysWillUpdate\n}) {\n  const ExistingContext = _global.__cassette_contexts__[displayName];\n  if (ExistingContext) {\n    if (ExistingContext.packageVersion !== packageVersion) {\n      logWarning(\n        `Warning: multiple versions of ${displayName} from the @cassette/core` +\n          ` package have been loaded. v${packageVersion} will be ignored and` +\n          ` v${ExistingContext.packageVersion} will be used instead.`\n      );\n    }\n    return ExistingContext;\n  }\n  // inspired by:\n  // https://github.com/philosaf/observed-bits/blob/master/src/index.js\n  const flags = {};\n  let i = 0;\n  for (const key of keysWillUpdate) {\n    flags[key] = 1 << i++;\n  }\n  const Context = createContext(defaultValue, function getChangedBits(\n    prev,\n    next\n  ) {\n    let mask = 0;\n    for (const key of keysWillUpdate) {\n      if (prev[key] !== next[key]) {\n        mask |= flags[key];\n      }\n    }\n    return mask;\n  });\n  Context.__cassetteGetObservedBits = keys => {\n    let observedBits = 0;\n    for (const key of keys) {\n      observedBits |= flags[key];\n    }\n    return observedBits;\n  };\n  Context.displayName = displayName;\n  Context.packageVersion = packageVersion;\n  _global.__cassette_contexts__[displayName] = Context;\n  return Context;\n}\n\nexport default createSingleGlobalContext;\n","'use strict';\nmodule.exports = function (arr, predicate, ctx) {\n\tif (typeof Array.prototype.findIndex === 'function') {\n\t\treturn arr.findIndex(predicate, ctx);\n\t}\n\n\tif (typeof predicate !== 'function') {\n\t\tthrow new TypeError('predicate must be a function');\n\t}\n\n\tvar list = Object(arr);\n\tvar len = list.length;\n\n\tif (len === 0) {\n\t\treturn -1;\n\t}\n\n\tfor (var i = 0; i < len; i++) {\n\t\tif (predicate.call(ctx, list[i], i, list)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import createSingleGlobalContext from './utils/createSingleGlobalContext';\n\n// TODO: test to make sure context contents stay in sync with\n// enumerated list here\n\nexport default createSingleGlobalContext({\n  displayName: 'PlayerContext',\n  keysWillUpdate: [\n    'playlist',\n    'activeTrackIndex',\n    'trackLoading',\n    'paused',\n    'currentTime',\n    'seekPreviewTime',\n    'seekInProgress',\n    'awaitingPlayResume',\n    'duration',\n    'bufferedRanges',\n    'playedRanges',\n    'seekableRanges',\n    'volume',\n    'muted',\n    'shuffle',\n    'stalled',\n    'playbackRate',\n    'setVolumeInProgress',\n    'repeatStrategy',\n    'mediaCannotPlay'\n  ]\n});\n","import createSingleGlobalContext from './utils/createSingleGlobalContext';\n\nexport default createSingleGlobalContext({\n  displayName: 'GroupContext',\n  keysWillUpdate: ['groupProps']\n});\n","export const repeatStrategyOptions = ['none', 'playlist', 'track'];\nexport const MEDIA_ERR_NETWORK = 2;\n","import PropTypes from 'prop-types';\n\nimport { repeatStrategyOptions } from './constants';\nimport { logWarning } from './utils/console';\n\nfunction requiredOnlyUnlessHasProp(propType, altPropName) {\n  let warnedAboutDefiningBoth = false;\n  function validate(props, propName, componentName, ...rest) {\n    if (propName in props) {\n      if (!warnedAboutDefiningBoth && altPropName in props) {\n        logWarning(\n          `Do not define both the '${propName}' and '${altPropName}' props.`\n        );\n        warnedAboutDefiningBoth = true;\n      }\n      return propType.isRequired(props, propName, componentName, ...rest);\n    }\n    if (!(altPropName in props)) {\n      return new Error(\n        `If the '${altPropName}' prop is not defined, '${propName}' must be.`\n      );\n    }\n  }\n  return validate;\n}\n\nexport const controlKeyword = PropTypes.oneOf([\n  'playpause',\n  'backskip',\n  'forwardskip',\n  'volume',\n  'mute',\n  'repeat',\n  'shuffle',\n  'progress',\n  'progressdisplay',\n  'fullscreen',\n  'spacer'\n]);\n\nexport const control = PropTypes.oneOfType([PropTypes.func, controlKeyword]);\n\nexport const crossOriginAttribute = PropTypes.oneOf([\n  'anonymous',\n  'use-credentials'\n]);\n\nexport const repeatStrategy = PropTypes.oneOf(repeatStrategyOptions);\n\nexport const mediaSource = PropTypes.shape({\n  src: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired\n});\n\nexport const mediaSessionAction = PropTypes.oneOf([\n  'play',\n  'pause',\n  'previoustrack',\n  'nexttrack',\n  'seekbackward',\n  'seekforward'\n]);\n\nexport const mediaSessionArtwork = PropTypes.shape({\n  src: PropTypes.string.isRequired,\n  sizes: PropTypes.string,\n  type: PropTypes.string\n});\n\nexport const track = PropTypes.shape({\n  url: requiredOnlyUnlessHasProp(PropTypes.string, 'sources'),\n  sources: requiredOnlyUnlessHasProp(\n    PropTypes.arrayOf(mediaSource.isRequired),\n    'url'\n  ),\n  title: PropTypes.string.isRequired,\n  artist: PropTypes.string,\n  album: PropTypes.string,\n  artwork: PropTypes.arrayOf(mediaSessionArtwork.isRequired),\n  duration: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  startingTime: PropTypes.number,\n  isUnboundedStream: PropTypes.bool,\n  meta: PropTypes.object\n});\n\nexport const seekMode = PropTypes.oneOf(['paused', 'immediate', 'onrelease']);\n","const loopchange = 'loopchange';\nconst srcrequest = 'srcrequest';\n\nfunction createCustomMediaElement(media) {\n  new MutationObserver(() => {\n    media.dispatchEvent(new Event(loopchange));\n  }).observe(media, {\n    attributes: true,\n    attributeFilter: ['loop']\n  });\n  // Don't let the media src property get modified directly.\n  // Instead, when it does get set, dispatch an event to be\n  // handled in a way that doesn't conflict with the loaded\n  // playlist.\n  Object.defineProperty(media, 'src', {\n    get: () => media.currentSrc,\n    set: src => {\n      const e = new Event(srcrequest);\n      e.srcRequested = src;\n      media.dispatchEvent(e);\n    }\n  });\n  return media;\n}\n\nexport default createCustomMediaElement;\n","/* ShuffleManager\n *\n * Manages navigation throughout a list which is:\n * - Sourced from another provided list\n * - In random order (except to avoid consecutive duplicates)\n * - Extended endlessly on-the-fly, as needed\n * - Able to have future history overwritten by non-random choices\n * - Able to swap source lists and maintain shuffle order for common members\n */\n\nexport class ShuffleManager {\n  constructor(list, options = {}) {\n    this._list = list;\n    this._forwardStack = [];\n    this._backStack = [];\n    this._currentItem = undefined;\n\n    this._allowBackShuffle = Boolean(options.allowBackShuffle);\n  }\n\n  findNextItem(currentIndex) {\n    if (currentIndex !== undefined) {\n      this.setCurrentIndex(currentIndex);\n    }\n    this._currentItem = _findNextItem(\n      this._list,\n      this._forwardStack,\n      this._backStack,\n      this._currentItem,\n      true\n    );\n    return this._currentItem;\n  }\n\n  findPreviousItem(currentIndex) {\n    if (currentIndex !== undefined) {\n      this.setCurrentIndex(currentIndex);\n    }\n    this._currentItem = _findNextItem(\n      this._list,\n      this._backStack,\n      this._forwardStack,\n      this._currentItem,\n      this._allowBackShuffle\n    );\n    return this._currentItem;\n  }\n\n  pickNextItem(index, currentIndex) {\n    if (currentIndex !== undefined) {\n      this.setCurrentIndex(currentIndex);\n    }\n    if (this._list[index] === undefined) {\n      return undefined;\n    }\n    if (this._currentItem !== undefined) {\n      this._backStack.push(this._currentItem);\n    }\n    this._forwardStack.length = 0;\n    this._currentItem = this._list[index];\n    return this._currentItem;\n  }\n\n  setList(list) {\n    this._list = list;\n  }\n\n  setOptions(options) {\n    for (const o of Object.keys(options)) {\n      switch (o) {\n        case 'allowBackShuffle':\n          this[`_${o}`] = Boolean(options[o]);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  setCurrentIndex(currentIndex) {\n    const item = this._list[currentIndex];\n    if (this._currentItem !== item) {\n      this.clear();\n      this._currentItem = item;\n    }\n  }\n\n  clear() {\n    this._forwardStack.length = 0;\n    this._backStack.length = 0;\n    this._currentItem = undefined;\n  }\n}\n\nfunction _goForward(n, forwardStack, backStack, currentItem) {\n  let item = currentItem;\n  for (let i = 0; i < n; i++) {\n    if (!forwardStack.length) {\n      // rollback before erroring (note stack reversal)\n      _goForward(i, backStack, forwardStack, item);\n      throw `Moving ${n} places was not possible!`;\n    }\n    backStack.push(item);\n    item = forwardStack.pop();\n  }\n  return item;\n}\n\nfunction _allItemsMatch(list, item) {\n  if (!list.length) {\n    return false;\n  }\n  for (let i = 0; i < list.length; i++) {\n    if (item !== list[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction _findNextItem(list, forwardStack, backStack, currentItem, allowMore) {\n  let item = currentItem;\n  if (!list.length) {\n    return undefined;\n  }\n  for (let i = 1; i <= forwardStack.length; i++) {\n    if (list.indexOf(forwardStack[forwardStack.length - i]) !== -1) {\n      return _goForward(i, forwardStack, backStack, item);\n    }\n  }\n  if (!allowMore) {\n    return undefined;\n  }\n  if (_allItemsMatch(list, item)) {\n    // we can serve this as our \"next\" item but we\n    // won't modify our history since it's the same.\n    return item;\n  }\n  let nextItem;\n  do {\n    nextItem = list[Math.floor(Math.random() * list.length)];\n  } while (item === nextItem || nextItem === undefined);\n  // if we're skipping items that aren't in our current list we may\n  // have some items in our forwardStack - make sure we move to the front.\n  item = _goForward(forwardStack.length, forwardStack, backStack, item);\n  if (item !== undefined) {\n    backStack.push(item);\n  }\n  return nextItem;\n}\n\nexport default ShuffleManager;\n","function isPlaylistValid(playlist) {\n  return Boolean(playlist && playlist.length);\n}\n\nexport default isPlaylistValid;\n","import isPlaylistValid from './isPlaylistValid';\n\nconst blankSources = [{ src: '' }];\n\nfunction getTrackSources(playlist, index) {\n  if (!isPlaylistValid(playlist)) {\n    return blankSources;\n  }\n  const { sources, url } = playlist[index];\n  if (sources) {\n    return sources.length ? sources : blankSources;\n  }\n  return [{ src: url }];\n}\n\nexport default getTrackSources;\n","import arrayFindIndex from 'array-find-index';\n\nfunction findTrackIndexByUrl(playlist, url) {\n  return arrayFindIndex(playlist, track => {\n    if (track.sources) {\n      return arrayFindIndex(track.sources, source => source.src === url) !== -1;\n    }\n    return track.url && url === track.url;\n  });\n}\n\nexport default findTrackIndexByUrl;\n","import isPlaylistValid from './isPlaylistValid';\nimport getTrackSources from './getTrackSources';\nimport findTrackIndexByUrl from './findTrackIndexByUrl';\n\nconst veryLongKey =\n  '__highly_unstable_snapshot_internals_which_will_break_your_app_if_you_use_them_directly__';\nconst versionKey = '__cassette_snapshot_version__';\n\n// IMPORTANT: new migrations *must* always be added to the end since\n// the tracked snapshot version is based on the migration index.\n// If there is a crash-inducing bug in an existing migration, it can be patched\n// in-place, but it should never be removed from the migrations array.\nconst migrations = [\n  oldSnapshot => {\n    const { __unstable__, ...rest } = oldSnapshot;\n    return {\n      ...rest,\n      [veryLongKey]: __unstable__\n    };\n  }\n];\n\nexport function getStateSnapshot(state) {\n  const {\n    paused,\n    currentTime,\n    activeTrackIndex,\n    volume,\n    muted,\n    loop,\n    cycle,\n    shuffle,\n    playbackRate,\n    duration,\n    __playlist__\n  } = state;\n  return {\n    [versionKey]: migrations.length,\n    [veryLongKey]: {\n      paused,\n      // currentTime can't be restored for unbounded live streams\n      currentTime: duration === Infinity ? 0 : currentTime,\n      activeTrackIndex,\n      volume,\n      muted,\n      loop,\n      cycle,\n      shuffle,\n      playbackRate,\n      activeTrackSrc: isPlaylistValid(__playlist__)\n        ? getTrackSources(__playlist__, activeTrackIndex)[0].src\n        : null\n    }\n  };\n}\n\nexport function restoreStateFromSnapshot(snapshot, props) {\n  const migratedSnapshot = migrations\n    .slice(snapshot[versionKey] || 0)\n    .reduce((oldSnapshot, migration) => migration(oldSnapshot), snapshot);\n  const {\n    paused,\n    currentTime,\n    activeTrackIndex,\n    volume,\n    muted,\n    loop,\n    cycle,\n    shuffle,\n    playbackRate,\n    activeTrackSrc\n  } = migratedSnapshot[veryLongKey];\n  const restoredStateValues = {};\n  if (isPlaylistValid(props.playlist) && typeof paused === 'boolean') {\n    // using awaitingPlay instead of paused triggers an animation\n    restoredStateValues.awaitingPlay = !paused;\n  }\n  if (typeof volume === 'number' && volume >= 0 && volume <= 1) {\n    restoredStateValues.volume = volume;\n  }\n  if (typeof muted === 'boolean') {\n    restoredStateValues.muted = muted;\n  }\n  if (typeof loop === 'boolean') {\n    restoredStateValues.loop = loop;\n  }\n  if (typeof cycle === 'boolean') {\n    restoredStateValues.cycle = cycle;\n  }\n  if (typeof shuffle === 'boolean') {\n    restoredStateValues.shuffle = shuffle;\n  }\n  if (typeof playbackRate === 'number') {\n    restoredStateValues.playbackRate = playbackRate;\n  }\n  let useCurrentTime = false;\n  if (\n    typeof activeTrackSrc === 'string' &&\n    typeof activeTrackIndex === 'number' &&\n    activeTrackIndex >= 0\n  ) {\n    // let's try staying on the same track index\n    const currentSrc =\n      props.playlist[activeTrackIndex] &&\n      getTrackSources(props.playlist, activeTrackIndex)[0].src;\n    if (currentSrc && activeTrackSrc === currentSrc) {\n      restoredStateValues.activeTrackIndex = activeTrackIndex;\n      useCurrentTime = true;\n    } else {\n      /* if the track we were playing before is in the new playlist,\n       * update the activeTrackIndex.\n       */\n      const newTrackIndex = findTrackIndexByUrl(props.playlist, activeTrackSrc);\n      if (newTrackIndex !== -1) {\n        restoredStateValues.activeTrackIndex = newTrackIndex;\n        useCurrentTime = true;\n      }\n    }\n  }\n  if (useCurrentTime && typeof currentTime === 'number' && currentTime >= 0) {\n    restoredStateValues.currentTime = currentTime;\n  }\n  return restoredStateValues;\n}\n","import getTrackSources from './getTrackSources';\n\n// collapses playlist into flat list containing\n// the first source url for each track\nfunction getSourceList(playlist) {\n  return (playlist || []).map((_, i) => getTrackSources(playlist, i)[0].src);\n}\n\nexport default getSourceList;\n","function getTimeRangesArray(timeRangesObj) {\n  const timeRangesArray = Array(timeRangesObj.length);\n  for (let i = 0; i < timeRangesObj.length; i++) {\n    timeRangesArray[i] = {\n      start: timeRangesObj.start(i),\n      end: timeRangesObj.end(i)\n    };\n  }\n  return timeRangesArray;\n}\n\nexport default getTimeRangesArray;\n","function getRepeatStrategy(loop, cycle) {\n  if (loop) {\n    return 'track';\n  }\n  if (cycle) {\n    return 'playlist';\n  }\n  return 'none';\n}\n\nexport default getRepeatStrategy;\n","function convertToNumberWithinIntervalBounds(number, min, max) {\n  min = typeof min === 'number' ? min : -Infinity;\n  max = typeof max === 'number' ? max : Infinity;\n  return Math.max(min, Math.min(number, max));\n}\n\nexport default convertToNumberWithinIntervalBounds;\n","function getDisplayText(track) {\n  if (!track) {\n    return '';\n  }\n  if (track.title && track.artist) {\n    return `${track.artist} - ${track.title}`;\n  }\n  return track.title || track.artist || track.album || '';\n}\n\nexport default getDisplayText;\n","function parseTimeString(str) {\n  let seconds = 0;\n  let factor = 1;\n  const times = str.split(':').slice(-3);\n  while (times.length > 0) {\n    seconds += factor * parseInt(times.pop(), 10);\n    factor *= 60;\n  }\n  return seconds;\n}\n\nexport default parseTimeString;\n","import parseTimeString from './parseTimeString';\n\nfunction getInitialDuration(track) {\n  let duration = 0;\n  if (track.duration) {\n    if (typeof track.duration === 'string') {\n      duration = parseTimeString(track.duration);\n    } else {\n      duration = track.duration;\n    }\n  }\n  return duration;\n}\n\nexport default getInitialDuration;\n","import React, { Component, Fragment, createElement } from 'react';\nimport PropTypes from 'prop-types';\nimport arrayFindIndex from 'array-find-index';\n\nimport PlayerContext from './PlayerContext';\nimport GroupContext from './GroupContext';\nimport * as PlayerPropTypes from './PlayerPropTypes';\nimport createCustomMediaElement from './factories/createCustomMediaElement';\nimport ShuffleManager from './utils/ShuffleManager';\nimport { getStateSnapshot, restoreStateFromSnapshot } from './utils/snapshot';\nimport getSourceList from './utils/getSourceList';\nimport getTrackSources from './utils/getTrackSources';\nimport getTimeRangesArray from './utils/getTimeRangesArray';\nimport findTrackIndexByUrl from './utils/findTrackIndexByUrl';\nimport isPlaylistValid from './utils/isPlaylistValid';\nimport getRepeatStrategy from './utils/getRepeatStrategy';\nimport convertToNumberWithinIntervalBounds from './utils/convertToNumberWithinIntervalBounds';\nimport { logError, logWarning } from './utils/console';\nimport getDisplayText from './utils/getDisplayText';\nimport getInitialDuration from './utils/getInitialDuration';\nimport { repeatStrategyOptions, MEDIA_ERR_NETWORK } from './constants';\n\nfunction playErrorHandler(err) {\n  logError(err);\n  if (err.name === 'NotAllowedError') {\n    const warningMessage =\n      'Media playback failed at ' +\n      new Date().toLocaleTimeString() +\n      '! (Perhaps autoplay is disabled in this browser.)';\n    logWarning(warningMessage);\n  }\n}\n\n// Existing Media Session API implementations have default handlers\n// for play/pause, and may yield unexpected behavior if custom\n// play/pause handlers are defined - so let's leave them be.\nconst supportableMediaSessionActions = [\n  'previoustrack',\n  'nexttrack',\n  'seekbackward',\n  'seekforward'\n];\n\nconst defaultState = {\n  // indicates whether media player should be paused\n  paused: true,\n  // elapsed time for active track, in seconds\n  currentTime: 0,\n  // The most recent targeted time, in seconds, for seek preview\n  seekPreviewTime: 0,\n  /* true if the user is currently dragging the mouse\n   * to seek a new track position\n   */\n  seekInProgress: false,\n  /* true if media was playing when seek previewing began,\n   * it was paused, and it should be resumed on seek\n   * complete\n   */\n  awaitingResumeOnSeekComplete: false,\n  // true if media will play once new track has loaded\n  awaitingPlayAfterTrackLoad: false,\n  // the duration in seconds of the loaded track\n  duration: 0,\n  // array describing the buffered ranges in the loaded track\n  bufferedRanges: [],\n  // array describing the already-played ranges in the loaded track\n  playedRanges: [],\n  // array describing the seekable ranges in the loaded track\n  seekableRanges: [],\n  // true if the media is currently stalled pending data buffering\n  stalled: false,\n  // true if the active track should play on the next componentDidUpdate\n  shouldRequestPlayOnNextUpdate: false,\n  /* true if an error occurs while fetching the active track media data\n   * or if its type is not a supported media format\n   */\n  mediaCannotPlay: false,\n  // maximum currentTime since the current track has been playing\n  maxKnownTime: 0\n};\n\n// assumes playlist is valid\nfunction getGoToTrackState({\n  prevState,\n  index,\n  track,\n  shouldPlay = true,\n  shouldForceLoad = false,\n  startingTime\n}) {\n  const isNewTrack = prevState.activeTrackIndex !== index;\n  const shouldLoadAsNew = Boolean(isNewTrack || shouldForceLoad);\n  const currentTime = startingTime || track.startingTime || 0;\n  return {\n    duration: getInitialDuration(track),\n    activeTrackIndex: index,\n    trackLoading: shouldLoadAsNew,\n    mediaCannotPlay: prevState.mediaCannotPlay && !shouldLoadAsNew,\n    currentTime: convertToNumberWithinIntervalBounds(currentTime, 0),\n    loop: shouldLoadAsNew ? false : prevState.loop,\n    shouldRequestPlayOnNextUpdate: Boolean(shouldPlay),\n    awaitingPlayAfterTrackLoad: Boolean(shouldPlay),\n    awaitingForceLoad: Boolean(shouldForceLoad),\n    maxKnownTime: shouldLoadAsNew ? 0 : prevState.maxKnownTime\n  };\n}\n\n/**\n * Wraps an area which shares a common [`playerContext`](#playercontext)\n */\nexport class PlayerContextProvider extends Component {\n  constructor(props) {\n    super(props);\n    let currentTime = 0;\n    let activeTrackIndex = convertToNumberWithinIntervalBounds(\n      props.startingTrackIndex,\n      0\n    );\n    const playlistIsValid = isPlaylistValid(props.playlist);\n    if (playlistIsValid && props.playlist[activeTrackIndex]) {\n      currentTime = props.playlist[activeTrackIndex].startingTime || 0;\n    }\n    const { initialStateSnapshot } = props;\n    let restoredStateFromSnapshot = {};\n    if (initialStateSnapshot) {\n      try {\n        restoredStateFromSnapshot = restoreStateFromSnapshot(\n          initialStateSnapshot,\n          props\n        );\n        const {\n          activeTrackIndex: a,\n          currentTime: c\n        } = restoredStateFromSnapshot;\n        if (typeof a === 'number') {\n          activeTrackIndex = a;\n        }\n        if (typeof c === 'number') {\n          currentTime = c;\n        }\n      } catch (err) {\n        logWarning(err);\n        logWarning('Loading Cassette state from snapshot failed.');\n        logWarning(\n          `Failed snapshot:\\n${JSON.stringify(initialStateSnapshot, null, 2)}`\n        );\n      }\n    }\n    this.state = {\n      ...defaultState,\n      // index matching requested track (whether track has loaded or not)\n      activeTrackIndex,\n      // whether we're waiting on loading metadata for the active track\n      trackLoading: isPlaylistValid(props.playlist),\n      // the current timestamp on the active track in seconds\n      currentTime: convertToNumberWithinIntervalBounds(currentTime, 0),\n      // the latest volume of the media, between 0 and 1.\n      volume: convertToNumberWithinIntervalBounds(props.defaultVolume, 0, 1),\n      // true if the media has been muted\n      muted: props.defaultMuted,\n      // whether to loop the active track\n      loop: props.defaultRepeatStrategy === 'track',\n      // true if playlist should continue at start after completion\n      cycle: props.defaultRepeatStrategy === 'playlist',\n      // whether to randomly pick next track from playlist after one finishes\n      shuffle: props.defaultShuffle,\n      // Rate at which media should be played. 1.0 is normal speed.\n      playbackRate: props.defaultPlaybackRate,\n      // true if user is currently dragging mouse to change the volume\n      setVolumeInProgress: false,\n      // initialize shouldRequestPlayOnNextUpdate from autoplay prop\n      shouldRequestPlayOnNextUpdate: props.autoplay && playlistIsValid,\n      awaitingForceLoad: false,\n      // duration might be set on track object\n      duration: getInitialDuration(\n        playlistIsValid && props.playlist[activeTrackIndex]\n      ),\n      // playlist prop copied to state (for getDerivedStateFromProps)\n      __playlist__: props.playlist,\n      // load overrides from previously-captured state snapshot\n      ...restoredStateFromSnapshot\n    };\n\n    // volume at last time we were unmuted and not actively setting volume\n    this.lastStableVolume = this.state.volume;\n\n    // used to keep track of play history when we are shuffling\n    this.shuffler = new ShuffleManager(getSourceList(props.playlist), {\n      allowBackShuffle: props.allowBackShuffle\n    });\n\n    // html media element used for playback\n    this.media = null;\n\n    this.videoHostElementList = [];\n    this.videoHostOccupiedCallbacks = new Map();\n    this.videoHostVacatedCallbacks = new Map();\n\n    // bind internal methods\n    this.handleTrackPlaybackFailure = this.handleTrackPlaybackFailure.bind(\n      this\n    );\n    this.handlePlayerOnlineAfterFailure = this.handlePlayerOnlineAfterFailure.bind(\n      this\n    );\n\n    // bind callback methods to pass to descendant elements\n    this.togglePause = this.togglePause.bind(this);\n    this.selectTrackIndex = this.selectTrackIndex.bind(this);\n    this.forwardSkip = this.forwardSkip.bind(this);\n    this.backSkip = this.backSkip.bind(this);\n    this.seekPreview = this.seekPreview.bind(this);\n    this.seekComplete = this.seekComplete.bind(this);\n    this.setVolume = this.setVolume.bind(this);\n    this.setVolumeComplete = this.setVolumeComplete.bind(this);\n    this.toggleMuted = this.toggleMuted.bind(this);\n    this.toggleShuffle = this.toggleShuffle.bind(this);\n    this.setRepeatStrategy = this.setRepeatStrategy.bind(this);\n    this.setPlaybackRate = this.setPlaybackRate.bind(this);\n    this.registerVideoHostElement = this.registerVideoHostElement.bind(this);\n    this.renderVideoIntoHostElement = this.renderVideoIntoHostElement.bind(\n      this\n    );\n    this.unregisterVideoHostElement = this.unregisterVideoHostElement.bind(\n      this\n    );\n    this.updateVideoHostElement = this.updateVideoHostElement.bind(this);\n\n    // bind media event handlers\n    this.handleMediaPlay = this.handleMediaPlay.bind(this);\n    this.handleMediaPause = this.handleMediaPause.bind(this);\n    this.handleMediaSrcrequest = this.handleMediaSrcrequest.bind(this);\n    this.handleMediaEnded = this.handleMediaEnded.bind(this);\n    this.handleMediaEmptied = this.handleMediaEmptied.bind(this);\n    this.handleMediaStalled = this.handleMediaStalled.bind(this);\n    this.handleMediaCanplaythrough = this.handleMediaCanplaythrough.bind(this);\n    this.handleMediaCanplay = this.handleMediaCanplay.bind(this);\n    this.handleMediaTimeupdate = this.handleMediaTimeupdate.bind(this);\n    this.handleMediaLoadeddata = this.handleMediaLoadeddata.bind(this);\n    this.handleMediaVolumechange = this.handleMediaVolumechange.bind(this);\n    this.handleMediaDurationchange = this.handleMediaDurationchange.bind(this);\n    this.handleMediaProgress = this.handleMediaProgress.bind(this);\n    this.handleMediaLoopchange = this.handleMediaLoopchange.bind(this);\n    this.handleMediaRatechange = this.handleMediaRatechange.bind(this);\n  }\n\n  componentDidMount() {\n    const media = (this.media = createCustomMediaElement(\n      this.props.createMediaElement()\n    ));\n\n    const {\n      defaultPlaybackRate,\n      crossOrigin,\n      playlist,\n      autoplayDelayInSeconds,\n      mediaElementRef,\n      getPosterImageForTrack,\n      getMediaTitleAttributeForTrack,\n      onActiveTrackUpdate\n    } = this.props;\n    const {\n      volume,\n      muted,\n      playbackRate,\n      loop,\n      activeTrackIndex,\n      shouldRequestPlayOnNextUpdate\n    } = this.state;\n\n    // initialize media properties\n    // We used to set currentTime here.. now waiting for loadeddata.\n    // This avoids an issue where some browsers ignore or delay currentTime\n    // updates when in the HAVE_NOTHING state.\n    media.defaultPlaybackRate = defaultPlaybackRate;\n    if (crossOrigin) {\n      media.crossOrigin = crossOrigin;\n    }\n    media.volume = volume;\n    media.muted = muted;\n    media.playbackRate = playbackRate;\n    media.loop = loop;\n    media.setAttribute('playsinline', '');\n    media.setAttribute('webkit-playsinline', '');\n    media.setAttribute('preload', 'metadata');\n    media.setAttribute(\n      'poster',\n      getPosterImageForTrack(playlist[activeTrackIndex])\n    );\n    media.setAttribute(\n      'title',\n      getMediaTitleAttributeForTrack(playlist[activeTrackIndex])\n    );\n    // add listeners for media events\n    media.addEventListener('play', this.handleMediaPlay);\n    media.addEventListener('pause', this.handleMediaPause);\n    media.addEventListener('ended', this.handleMediaEnded);\n    media.addEventListener('stalled', this.handleMediaStalled);\n    media.addEventListener('emptied', this.handleMediaEmptied);\n    media.addEventListener('canplay', this.handleMediaCanplay);\n    media.addEventListener('canplaythrough', this.handleMediaCanplaythrough);\n    media.addEventListener('timeupdate', this.handleMediaTimeupdate);\n    media.addEventListener('loadeddata', this.handleMediaLoadeddata);\n    media.addEventListener('volumechange', this.handleMediaVolumechange);\n    media.addEventListener('durationchange', this.handleMediaDurationchange);\n    media.addEventListener('progress', this.handleMediaProgress);\n    media.addEventListener('ratechange', this.handleMediaRatechange);\n    media.addEventListener('error', this.handleTrackPlaybackFailure);\n    // add listeners for special events\n    media.addEventListener('srcrequest', this.handleMediaSrcrequest);\n    media.addEventListener('loopchange', this.handleMediaLoopchange);\n\n    // set source elements for current track\n    this.setMediaElementSources();\n\n    // initially mount media element in the hidden container (this may change)\n    this.mediaContainer.appendChild(media);\n\n    if (shouldRequestPlayOnNextUpdate) {\n      this.setState({\n        shouldRequestPlayOnNextUpdate: false\n      });\n      this.delayTimeout = setTimeout(() => {\n        this.togglePause(false);\n      }, autoplayDelayInSeconds * 1000);\n    }\n\n    if (mediaElementRef) {\n      mediaElementRef(media);\n    }\n\n    if (onActiveTrackUpdate) {\n      onActiveTrackUpdate({\n        track: playlist[activeTrackIndex],\n        trackIndex: activeTrackIndex,\n        previousTrack: null,\n        previousTrackIndex: null\n      });\n    }\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const newPlaylist = nextProps.playlist;\n\n    if (newPlaylist === prevState.__playlist__) {\n      // reference comparison is equal so we'll\n      // assume the playlist is unchanged.\n      return null;\n    }\n\n    const baseNewState = {\n      __playlist__: newPlaylist\n    };\n\n    // check if the new playlist is invalid\n    if (!isPlaylistValid(newPlaylist)) {\n      return {\n        ...defaultState,\n        ...baseNewState,\n        activeTrackIndex: 0,\n        trackLoading: false\n      };\n    }\n\n    // check if the activeTrackIndex doesn't need to be updated\n    const prevSources = getTrackSources(\n      prevState.__playlist__,\n      prevState.activeTrackIndex\n    );\n\n    if (newPlaylist[prevState.activeTrackIndex]) {\n      // the sources if we stay on the same track index\n      const currentSources = getTrackSources(\n        newPlaylist,\n        prevState.activeTrackIndex\n      );\n      // non-comprehensive but probably accurate check\n      if (prevSources[0].src === currentSources[0].src) {\n        // our active track index already matches\n        return baseNewState;\n      }\n    }\n\n    /* if the track we're already playing is in the new playlist, update the\n     * activeTrackIndex.\n     */\n    const newTrackIndex = findTrackIndexByUrl(newPlaylist, prevSources[0].src);\n    if (newTrackIndex !== -1) {\n      return {\n        ...baseNewState,\n        activeTrackIndex: newTrackIndex\n      };\n    }\n\n    // if not, then load the first track in the new playlist, and pause.\n    return {\n      ...baseNewState,\n      ...getGoToTrackState({\n        prevState,\n        track: newPlaylist[0],\n        index: 0,\n        shouldPlay: false,\n        shouldForceLoad: true\n      }),\n      mediaCannotPlay: false,\n      awaitingPlayAfterTrackLoad: false\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    this.media.defaultPlaybackRate = this.props.defaultPlaybackRate;\n    this.media.crossOrigin = this.props.crossOrigin;\n\n    this.shuffler.setList(getSourceList(this.props.playlist));\n    this.shuffler.setOptions({\n      allowBackShuffle: this.props.allowBackShuffle\n    });\n\n    const prevSources = getTrackSources(\n      prevProps.playlist,\n      prevState.activeTrackIndex\n    );\n    const newSources = getTrackSources(\n      this.props.playlist,\n      this.state.activeTrackIndex\n    );\n    const prevTrack = prevProps.playlist[prevState.activeTrackIndex];\n    const newTrack = this.props.playlist[this.state.activeTrackIndex];\n    if (\n      this.state.awaitingForceLoad ||\n      prevSources[0].src !== newSources[0].src\n    ) {\n      this.setMediaElementSources();\n      this.media.setAttribute(\n        'poster',\n        this.props.getPosterImageForTrack(newTrack)\n      );\n      this.media.setAttribute(\n        'title',\n        this.props.getMediaTitleAttributeForTrack(newTrack)\n      );\n      this.setState({\n        awaitingForceLoad: false\n      });\n      if (!this.state.shuffle) {\n        // after toggling off shuffle, we defer clearing the shuffle\n        // history until we actually change tracks - if the user quickly\n        // toggles  shuffle off then back on again, we don't want to have\n        // lost our history.\n        this.shuffler.clear();\n      }\n      // If track changes before player is back online, the previous track\n      // shouldn't be reloaded.\n      window.removeEventListener('online', this.handlePlayerOnlineAfterFailure);\n    }\n\n    if (this.props.onActiveTrackUpdate && prevTrack !== newTrack) {\n      this.props.onActiveTrackUpdate({\n        track: newTrack,\n        trackIndex: this.state.activeTrackIndex,\n        previousTrack: prevTrack,\n        previousTrackIndex: prevState.activeTrackIndex\n      });\n    }\n\n    if (prevProps !== this.props && !this.media.paused) {\n      // update running media session based on new props\n      this.stealMediaSession();\n    }\n\n    if (this.state.shouldRequestPlayOnNextUpdate) {\n      this.setState({\n        shouldRequestPlayOnNextUpdate: false\n      });\n      // media.currentSrc is updated asynchronously so we should\n      // play async to avoid weird intermediate state issues\n      setTimeout(() => {\n        this.togglePause(false);\n      });\n    }\n\n    clearTimeout(this.snapshotUpdateTimeout);\n    this.snapshotUpdateTimeout = setTimeout(() => {\n      if (this.props.onStateSnapshot) {\n        this.props.onStateSnapshot(getStateSnapshot(this.state));\n      }\n    }, 100);\n  }\n\n  componentWillUnmount() {\n    const { media } = this;\n    // Media element creation will have failed if MutationObserver isn't\n    // supported by the browser. The parent might use an Error Boundary\n    // to display a fallback and so we try to avoid triggering *additional*\n    // errors while the component unmounts.\n    if (media) {\n      // remove listeners for media events\n      media.removeEventListener('play', this.handleMediaPlay);\n      media.removeEventListener('pause', this.handleMediaPause);\n      media.removeEventListener('ended', this.handleMediaEnded);\n      media.removeEventListener('stalled', this.handleMediaStalled);\n      media.removeEventListener('emptied', this.handleMediaEmptied);\n      media.removeEventListener(\n        'canplaythrough',\n        this.handleMediaCanplaythrough\n      );\n      media.removeEventListener('canplay', this.handleMediaCanplay);\n      media.removeEventListener('timeupdate', this.handleMediaTimeupdate);\n      media.removeEventListener('loadeddata', this.handleMediaLoadeddata);\n      media.removeEventListener('volumechange', this.handleMediaVolumechange);\n      media.removeEventListener(\n        'durationchange',\n        this.handleMediaDurationchange\n      );\n      media.removeEventListener('progress', this.handleMediaProgress);\n      media.removeEventListener('ratechange', this.handleMediaRatechange);\n      media.removeEventListener('error', this.handleTrackPlaybackFailure);\n      // remove special event listeners on the media element\n      media.removeEventListener('srcrequest', this.handleMediaSrcrequest);\n      media.removeEventListener('loopchange', this.handleMediaLoopchange);\n\n      const sourceElements = media.querySelectorAll('source');\n      for (const sourceElement of sourceElements) {\n        sourceElement.removeEventListener(\n          'error',\n          this.handleTrackPlaybackFailure\n        );\n      }\n    }\n    clearTimeout(this.gapLengthTimeout);\n    clearTimeout(this.delayTimeout);\n    window.removeEventListener('online', this.handlePlayerOnlineAfterFailure);\n  }\n\n  stealMediaSession() {\n    if (\n      // eslint-disable-next-line no-undef\n      !(window.MediaSession && navigator.mediaSession instanceof MediaSession)\n    ) {\n      return;\n    }\n    // eslint-disable-next-line no-undef\n    navigator.mediaSession.metadata = new MediaMetadata(\n      this.props.playlist[this.state.activeTrackIndex]\n    );\n    supportableMediaSessionActions\n      .map(action => {\n        if (this.props.supportedMediaSessionActions.indexOf(action) === -1) {\n          return null;\n        }\n        const seekLength = this.props.mediaSessionSeekLengthInSeconds;\n        switch (action) {\n          case 'play':\n            return this.togglePause.bind(this, false);\n          case 'pause':\n            return this.togglePause.bind(this, true);\n          case 'previoustrack':\n            return this.backSkip;\n          case 'nexttrack':\n            return this.forwardSkip;\n          case 'seekbackward':\n            return () => (this.media.currentTime -= seekLength);\n          case 'seekforward':\n            return () => (this.media.currentTime += seekLength);\n          default:\n            return undefined;\n        }\n      })\n      .forEach((handler, i) => {\n        navigator.mediaSession.setActionHandler(\n          supportableMediaSessionActions[i],\n          handler\n        );\n      });\n  }\n\n  setMediaElementSources() {\n    // remove current sources\n    const { playlist } = this.props;\n    let firstChild;\n    while ((firstChild = this.media.firstChild)) {\n      this.media.removeChild(firstChild);\n    }\n    if (isPlaylistValid(playlist)) {\n      const sources = getTrackSources(playlist, this.state.activeTrackIndex);\n      // add new sources\n      for (const source of sources) {\n        const sourceElement = document.createElement('source');\n        sourceElement.src = source.src;\n        if (source.type) {\n          sourceElement.type = source.type;\n        }\n        sourceElement.addEventListener(\n          'error',\n          this.handleTrackPlaybackFailure\n        );\n        this.media.appendChild(sourceElement);\n      }\n    }\n    // cancel playback and re-scan new sources\n    this.media.load();\n  }\n\n  reloadActiveTrack({ shouldPlay = false } = {}) {\n    const { playlist } = this.props;\n    const { activeTrackIndex, paused, currentTime } = this.state;\n    if (!isPlaylistValid(playlist)) {\n      return;\n    }\n    this.goToTrack({\n      track: playlist[activeTrackIndex],\n      shouldForceLoad: true,\n      shouldPlay: shouldPlay || !paused,\n      startingTime: currentTime,\n      index: activeTrackIndex\n    });\n  }\n\n  handlePlayerOnlineAfterFailure() {\n    this.reloadActiveTrack();\n    window.removeEventListener('online', this.handlePlayerOnlineAfterFailure);\n  }\n\n  handleTrackPlaybackFailure(event) {\n    const shouldPlay = !this.state.paused;\n    this.setState({\n      mediaCannotPlay: true\n    });\n    const error = event.target.error;\n    // If there's a network error, the current track should be reloaded\n    // in order to recover from the error state the player is in.\n    if (\n      event.target === this.media &&\n      error &&\n      error.code === MEDIA_ERR_NETWORK\n    ) {\n      if (window.navigator.onLine) {\n        this.reloadActiveTrack({ shouldPlay });\n      } else {\n        window.addEventListener('online', this.handlePlayerOnlineAfterFailure);\n      }\n    }\n    if (this.props.onTrackPlaybackFailure) {\n      this.props.onTrackPlaybackFailure({\n        track: this.props.playlist[this.state.activeTrackIndex],\n        trackIndex: this.state.activeTrackIndex,\n        event\n      });\n    }\n  }\n\n  registerVideoHostElement(hostElement, { onHostOccupied, onHostVacated }) {\n    this.videoHostElementList = this.videoHostElementList.concat(hostElement);\n    this.videoHostOccupiedCallbacks.set(hostElement, onHostOccupied);\n    this.videoHostVacatedCallbacks.set(hostElement, onHostVacated);\n  }\n\n  renderVideoIntoHostElement(hostElement) {\n    if (this.videoHostElementList.indexOf(hostElement) === -1) {\n      return;\n    }\n    cancelAnimationFrame(this.videoHostUpdateRaf);\n    this.videoHostUpdateRaf = requestAnimationFrame(() =>\n      this.updateVideoHostElement(hostElement)\n    );\n  }\n\n  unregisterVideoHostElement(hostElement) {\n    this.videoHostElementList = this.videoHostElementList.filter(\n      elem => elem !== hostElement\n    );\n    this.videoHostOccupiedCallbacks.delete(hostElement);\n    this.videoHostVacatedCallbacks.delete(hostElement);\n    if (this.media.parentNode === hostElement) {\n      this.updateVideoHostElement();\n    }\n  }\n\n  updateVideoHostElement(hostElement) {\n    if (!hostElement) {\n      hostElement = this.videoHostElementList[0] || this.mediaContainer;\n    } else {\n      // move hostElement to front of list\n      this.videoHostElementList = [hostElement].concat(\n        this.videoHostElementList.filter(elem => elem !== hostElement)\n      );\n    }\n    const playing = !this.media.paused;\n    const oldHostElement = this.media.parentNode;\n    if (hostElement === oldHostElement) {\n      return;\n    }\n    hostElement.appendChild(this.media);\n    // according to the HTML spec playback should continue, but\n    // some browsers pause the element whenever it is moved around, so\n    // let's make sure playback resumes if that's the case.\n    if (playing && this.media.paused) {\n      this.media.play();\n    }\n    const onVacated = this.videoHostVacatedCallbacks.get(oldHostElement);\n    if (onVacated) {\n      onVacated(this.media);\n    }\n    const onOccupied = this.videoHostOccupiedCallbacks.get(hostElement);\n    if (onOccupied) {\n      onOccupied(this.media);\n    }\n  }\n\n  handleMediaPlay() {\n    this.setState(\n      state =>\n        state.paused === false && state.awaitingPlayAfterTrackLoad === false\n          ? null\n          : { paused: false, awaitingPlayAfterTrackLoad: false }\n    );\n    this.stealMediaSession();\n  }\n\n  handleMediaPause() {\n    this.setState(state => (state.paused === true ? null : { paused: true }));\n  }\n\n  handleMediaSrcrequest(e) {\n    const { playlist } = this.props;\n    const sources = getTrackSources(playlist, this.state.activeTrackIndex);\n    if (arrayFindIndex(sources, s => s.src === e.srcRequested) !== -1) {\n      // we're good! nothing to update.\n      return;\n    }\n    // looks like 'src' was set from outside our component.\n    // let's see if we can use it.\n    const newTrackIndex = findTrackIndexByUrl(playlist, e.srcRequested);\n    if (newTrackIndex === -1) {\n      logError(\n        `Source '${e.srcRequested}' does not exist in the loaded playlist. ` +\n          `Make sure you've updated the 'playlist' prop to ` +\n          `PlayerContextProvider before you select this track!`\n      );\n      return;\n    }\n    this.selectTrackIndex(newTrackIndex);\n  }\n\n  handleMediaEnded() {\n    if (this.state.seekInProgress) {\n      // nothing to do if we're in the middle of a seek\n      // (this can happen if we're in seekMode: immediate)\n      return;\n    }\n    clearTimeout(this.gapLengthTimeout);\n    const { playlist, loadFirstTrackOnPlaylistComplete } = this.props;\n    if (!isPlaylistValid(playlist)) {\n      return;\n    }\n    const { cycle, activeTrackIndex } = this.state;\n    if (!cycle && activeTrackIndex + 1 >= playlist.length) {\n      if (loadFirstTrackOnPlaylistComplete) {\n        this.goToTrack({\n          index: 0,\n          track: playlist[0],\n          shouldPlay: false,\n          shouldForceLoad: true\n        });\n      }\n      return;\n    }\n    this.gapLengthTimeout = setTimeout(\n      this.forwardSkip,\n      this.props.gapLengthInSeconds * 1000\n    );\n  }\n\n  handleMediaStalled() {\n    this.setState(state => (state.stalled === true ? null : { stalled: true }));\n  }\n\n  handleMediaEmptied() {\n    this.setState(state => (state.paused === true ? null : { paused: true }));\n  }\n\n  handleMediaCanplay() {\n    this.setState(\n      state => (state.trackLoading === false ? null : { trackLoading: false })\n    );\n  }\n\n  handleMediaCanplaythrough() {\n    this.setState(\n      state => (state.stalled === false ? null : { stalled: false })\n    );\n  }\n\n  handleMediaTimeupdate() {\n    const { currentTime, played } = this.media;\n    const { onTimeUpdate, playlist } = this.props;\n    const { activeTrackIndex, trackLoading } = this.state;\n    if (trackLoading) {\n      // we'll get another time update when the track loads\n      // but for now this helps us avoid unnecessarily\n      // jumping back to currentTime: 0 in the UI while\n      // the track is loading.\n      return;\n    }\n    this.setState(state => ({\n      currentTime,\n      playedRanges: getTimeRangesArray(played),\n      maxKnownTime: Math.max(state.maxKnownTime, currentTime)\n    }));\n    if (onTimeUpdate) {\n      onTimeUpdate({\n        currentTime,\n        track: playlist[activeTrackIndex],\n        trackIndex: activeTrackIndex\n      });\n    }\n  }\n\n  handleMediaLoadeddata() {\n    if (this.media.currentTime !== this.state.currentTime) {\n      this.media.currentTime = this.state.currentTime;\n    }\n  }\n\n  handleMediaVolumechange() {\n    const { volume, muted } = this.media;\n    this.setState({ volume, muted });\n  }\n\n  handleMediaDurationchange() {\n    const { duration } = this.media;\n    const activeTrack = this.props.playlist[this.state.activeTrackIndex];\n    if (duration === Infinity) {\n      // This *could* be because we're consuming an unbounded stream.\n      // It could also be because of a weird iOS bug that we want to\n      // try to prevent. See https://github.com/benwiley4000/cassette/issues/355\n\n      // If we still end up with Infinity duration multiple times for\n      // the same track, we'll assume it's correct.\n      if (\n        activeTrack.isUnboundedStream ||\n        activeTrack === this.activeTrackAtLastDurationChange\n      ) {\n        this.setState({\n          duration,\n          currentTime: 0\n        });\n        this.media.currentTime = 0;\n      } else {\n        const { paused } = this.state;\n        this.media.load();\n        if (!paused) {\n          // media.currentSrc is updated asynchronously so we should\n          // play async to avoid weird intermediate state issues\n          setTimeout(() => {\n            this.togglePause(false);\n          });\n        }\n      }\n    } else {\n      this.setState({ duration });\n    }\n    this.activeTrackAtLastDurationChange = activeTrack;\n  }\n\n  handleMediaProgress() {\n    this.setState({\n      bufferedRanges: getTimeRangesArray(this.media.buffered),\n      seekableRanges: getTimeRangesArray(this.media.seekable)\n    });\n  }\n\n  handleMediaLoopchange() {\n    const { loop } = this.media;\n    this.setState(state => (state.loop === loop ? null : { loop }));\n  }\n\n  handleMediaRatechange() {\n    const { playbackRate } = this.media;\n    this.setState(\n      state => (state.playbackRate === playbackRate ? null : { playbackRate })\n    );\n  }\n\n  togglePause(value) {\n    clearTimeout(this.delayTimeout);\n    const pause = typeof value === 'boolean' ? value : !this.state.paused;\n    if (pause) {\n      this.media.pause();\n      return;\n    }\n    if (!this.media.currentSrc) {\n      return;\n    }\n    try {\n      const playPromise = this.media.play();\n      if (playPromise && typeof playPromise.catch === 'function') {\n        playPromise\n          .catch(err => {\n            // AbortError is pretty much always called because we're skipping\n            // tracks quickly or hitting pause before a track has a chance to\n            // play. It's pretty safe to just ignore these error messages.\n            if (err.name !== 'AbortError') {\n              return Promise.reject(err);\n            }\n          })\n          .catch(playErrorHandler);\n      }\n    } catch (err) {\n      playErrorHandler(err);\n    }\n  }\n\n  // assumes playlist is valid - don't call without checking\n  goToTrack(args) {\n    clearTimeout(this.delayTimeout);\n    this.setState(prevState => getGoToTrackState({ prevState, ...args }));\n  }\n\n  selectTrackIndex(index) {\n    const { playlist } = this.props;\n    if (!isPlaylistValid(playlist)) {\n      return;\n    }\n    if (index < 0 || index > playlist.length) {\n      logWarning(`Playlist index ${index} is out of bounds!`);\n      return;\n    }\n    if (this.state.shuffle) {\n      this.shuffler.pickNextItem(index, this.state.activeTrackIndex);\n    }\n    this.goToTrack({ index, track: playlist[index] });\n  }\n\n  backSkip() {\n    const { playlist, stayOnBackSkipThreshold } = this.props;\n    const { media } = this;\n    const { cycle, activeTrackIndex, shuffle } = this.state;\n    if (\n      !isPlaylistValid(playlist) ||\n      media.currentTime >= stayOnBackSkipThreshold ||\n      (!cycle && activeTrackIndex < 1)\n    ) {\n      media.currentTime = 0;\n      return;\n    }\n    let index;\n    if (shuffle) {\n      const previousItem = this.shuffler.findPreviousItem(activeTrackIndex);\n      if (previousItem === undefined) {\n        // if we aren't allowing backShuffle then we'll hit a stopping point.\n        media.currentTime = 0;\n        return;\n      }\n      index = findTrackIndexByUrl(playlist, previousItem);\n    } else {\n      index = activeTrackIndex - 1;\n      if (index < 0) {\n        index = playlist.length - 1;\n      }\n    }\n    this.goToTrack({ index, track: playlist[index], shouldForceLoad: true });\n  }\n\n  forwardSkip() {\n    const { playlist } = this.props;\n    const { cycle, activeTrackIndex, shuffle } = this.state;\n    if (\n      !isPlaylistValid(playlist) ||\n      (!cycle && activeTrackIndex + 1 >= playlist.length)\n    ) {\n      return;\n    }\n    let index;\n    if (shuffle) {\n      index = findTrackIndexByUrl(\n        playlist,\n        this.shuffler.findNextItem(activeTrackIndex)\n      );\n    } else {\n      index = activeTrackIndex + 1;\n      if (index >= playlist.length) {\n        index = 0;\n      }\n    }\n    this.goToTrack({ index, track: playlist[index], shouldForceLoad: true });\n  }\n\n  seekPreview(targetTime) {\n    if (!isPlaylistValid(this.props.playlist)) {\n      return;\n    }\n    const baseStateUpdate = {\n      seekPreviewTime: targetTime,\n      seekInProgress: true\n    };\n    switch (this.props.seekMode) {\n      case 'paused':\n        this.setState(({ paused, awaitingResumeOnSeekComplete }) => ({\n          ...baseStateUpdate,\n          awaitingResumeOnSeekComplete: paused\n            ? awaitingResumeOnSeekComplete\n            : true,\n          currentTime: targetTime\n        }));\n        if (!this.state.trackLoading) {\n          this.media.currentTime = targetTime;\n        }\n        if (!this.state.paused) {\n          this.togglePause(true);\n        }\n        break;\n      case 'immediate':\n        this.setState(({ paused, awaitingResumeOnSeekComplete }) => ({\n          ...baseStateUpdate,\n          awaitingResumeOnSeekComplete: paused\n            ? awaitingResumeOnSeekComplete\n            : true,\n          currentTime: targetTime\n        }));\n        if (!this.state.trackLoading) {\n          this.media.currentTime = targetTime;\n        }\n        if (this.state.awaitingResumeOnSeekComplete && !this.media.ended) {\n          // if we earlier encountered an 'ended' state,\n          // un-pausing becomes necessary to resume playback\n          this.togglePause(false);\n        }\n        break;\n      case 'onrelease':\n        this.setState(baseStateUpdate);\n        break;\n    }\n  }\n\n  seekComplete(targetTime) {\n    const {\n      seekPreviewTime,\n      awaitingResumeOnSeekComplete,\n      trackLoading\n    } = this.state;\n    const baseStateUpdate = {\n      seekInProgress: false,\n      awaitingResumeOnSeekComplete: false\n    };\n    const currentTime =\n      typeof targetTime === 'number' ? targetTime : seekPreviewTime;\n\n    if (isNaN(currentTime)) {\n      this.setState(baseStateUpdate);\n      return;\n    }\n    this.setState({\n      ...baseStateUpdate,\n      /* we'll update currentTime on the media listener hook anyway,\n       * but that might not happen for a bit... so the optimistic update\n       * helps us avoid the progress bar jumping around and confusing the user.\n       * https://github.com/benwiley4000/cassette/issues/209\n       */\n      currentTime\n    });\n    if (!trackLoading) {\n      this.media.currentTime = currentTime;\n    }\n    if (awaitingResumeOnSeekComplete) {\n      if (this.media.ended) {\n        this.forwardSkip();\n      } else {\n        this.togglePause(false);\n      }\n    }\n  }\n\n  setVolume(volume, inProgress = true) {\n    if (inProgress && !this.state.setVolumeInProgress) {\n      this.setState({\n        setVolumeInProgress: true\n      });\n    }\n    const volumeInBounds = convertToNumberWithinIntervalBounds(volume, 0, 1);\n    this.media.muted = volumeInBounds === 0 ? true : false;\n    this.media.volume = volumeInBounds;\n  }\n\n  setVolumeComplete(volume) {\n    if (typeof volume === 'number') {\n      this.setVolume(volume, false);\n    }\n    this.setState({\n      setVolumeInProgress: false\n    });\n    if (!this.media.muted) {\n      this.lastStableVolume = this.media.volume;\n    }\n  }\n\n  toggleMuted(value) {\n    const muted = typeof value === 'boolean' ? value : !this.state.muted;\n    this.media.muted = muted;\n    if (!muted) {\n      this.media.volume = this.lastStableVolume;\n    }\n  }\n\n  toggleShuffle(value) {\n    const shuffle = typeof value === 'boolean' ? value : !this.state.shuffle;\n    this.setState({ shuffle });\n  }\n\n  setRepeatStrategy(repeatStrategy) {\n    if (repeatStrategyOptions.indexOf(repeatStrategy) === -1) {\n      logWarning(\n        'repeatStrategy \"' +\n          repeatStrategy +\n          '\" is not one of: ' +\n          repeatStrategyOptions.split(', ') +\n          '.'\n      );\n      return;\n    }\n    switch (repeatStrategy) {\n      case 'track':\n        // state update is automatic\n        this.media.loop = true;\n        break;\n      case 'playlist':\n        this.setState({\n          loop: false,\n          cycle: true\n        });\n        this.media.loop = false;\n        break;\n      case 'none':\n        this.setState({\n          loop: false,\n          cycle: false\n        });\n        this.media.loop = false;\n        break;\n    }\n  }\n\n  setPlaybackRate(rate) {\n    this.media.playbackRate = rate;\n  }\n\n  getControlProps() {\n    const { props, state } = this;\n    const playerContext = {\n      playlist: props.playlist,\n      activeTrackIndex: state.activeTrackIndex,\n      trackLoading: state.trackLoading,\n      paused: state.paused,\n      currentTime: state.currentTime,\n      seekPreviewTime: state.seekPreviewTime,\n      seekInProgress: state.seekInProgress,\n      awaitingPlayResume:\n        state.awaitingResumeOnSeekComplete || state.awaitingPlayAfterTrackLoad,\n      duration:\n        state.duration === Infinity ? state.maxKnownTime : state.duration,\n      bufferedRanges: state.bufferedRanges,\n      playedRanges: state.playedRanges,\n      seekableRanges: state.seekableRanges,\n      volume: state.volume,\n      muted: state.muted,\n      shuffle: state.shuffle,\n      stalled: state.stalled,\n      playbackRate: state.playbackRate,\n      mediaCannotPlay: state.mediaCannotPlay,\n      setVolumeInProgress: state.setVolumeInProgress,\n      repeatStrategy: getRepeatStrategy(state.loop, state.cycle),\n      registerVideoHostElement: this.registerVideoHostElement,\n      renderVideoIntoHostElement: this.renderVideoIntoHostElement,\n      unregisterVideoHostElement: this.unregisterVideoHostElement,\n      onTogglePause: this.togglePause,\n      onSelectTrackIndex: this.selectTrackIndex,\n      onBackSkip: this.backSkip,\n      onForwardSkip: this.forwardSkip,\n      onSeekPreview: this.seekPreview,\n      onSeekComplete: this.seekComplete,\n      onSetVolume: this.setVolume,\n      onSetVolumeComplete: this.setVolumeComplete,\n      onToggleMuted: this.toggleMuted,\n      onToggleShuffle: this.toggleShuffle,\n      onSetRepeatStrategy: this.setRepeatStrategy,\n      onSetPlaybackRate: this.setPlaybackRate,\n      reloadActiveTrack: this.reloadActiveTrack\n    };\n    if (this.playerContext) {\n      // only update this.playerContext if something has changed\n      for (const key of Object.keys(this.playerContext)) {\n        if (playerContext[key] !== this.playerContext[key]) {\n          this.playerContext = playerContext;\n          break;\n        }\n      }\n    } else {\n      // first time - nothing to compare\n      this.playerContext = playerContext;\n    }\n    return this.playerContext;\n  }\n\n  render() {\n    const playerContext = this.getControlProps();\n    return (\n      <Fragment>\n        <div ref={elem => (this.mediaContainer = elem)} hidden />\n        <PlayerContext.Provider value={playerContext}>\n          {typeof this.props.children === 'function'\n            ? this.props.children(playerContext)\n            : this.props.children}\n        </PlayerContext.Provider>\n      </Fragment>\n    );\n  }\n}\n\nPlayerContextProvider.propTypes = {\n  /**\n   * An array of [`track`](#track) objects to play in order (except when\n   * shuffle mode is turned on)\n   **/\n  playlist: PropTypes.arrayOf(PlayerPropTypes.track.isRequired).isRequired,\n  /** Set to `true` to play media on player load. Think before doing this. It is\n   * often a bad idea, although it can make sense if your app is expressly made\n   * for media playback and you're resuming playback from the last session.\n   * Note that some platforms will disallow this from happening under many\n   * scenarios, and in these cases, `autoplay` will simply fail gracefully.\n   */\n  autoplay: PropTypes.bool.isRequired,\n  /**\n   * If your app uses a custom implementation of the `HTMLMediaElement`, you\n   * can supply your own factory function to return it. This is an advanced\n   * edge case.\n   */\n  createMediaElement: PropTypes.func.isRequired,\n  /** If you're using `autoplay` but want to wait a few seconds before the\n   * media playback kicks in, you can specify that timeout in second here.\n   */\n  autoplayDelayInSeconds: PropTypes.number.isRequired,\n  /**\n   * Similar to `autoplayDelayInSeconds` but for the pause between tracks\n   * (if you want to evoke the feeling of listening to one of those old CDs with\n   * a negative countdown before it starts, which you never asked for).\n   */\n  gapLengthInSeconds: PropTypes.number.isRequired,\n  /** A [`crossOriginAttribute`](#crossoriginattribute) value */\n  crossOrigin: PlayerPropTypes.crossOriginAttribute,\n  /** The starting volume (0-1) */\n  defaultVolume: PropTypes.number.isRequired,\n  /** The starting `muted` value (`true` or `false`) */\n  defaultMuted: PropTypes.bool,\n  /** The starting [`repeatStrategy`](#repeatstrategy) */\n  defaultRepeatStrategy: PlayerPropTypes.repeatStrategy.isRequired,\n  /** Will shuffle mode be active by default? */\n  defaultShuffle: PropTypes.bool,\n  /** The starting playback rate (1 is normal, 0.5 is half, 2 is double) */\n  defaultPlaybackRate: PropTypes.number.isRequired,\n  /**\n   * The starting track index (an advanced use case.. normally you should put\n   * the track you want to hear first at the start of the playlist, unless\n   * you are loading an `initialStateSnapshot` which will override this value\n   * anyway\n   */\n  startingTrackIndex: PropTypes.number.isRequired,\n  /**\n   * Set this `false` if the player should rest of the final track when\n   * the playlist has completed. Ignored unless the\n   * current [`repeatStrategy`](#repeatstrategy) is `none`\n   */\n  loadFirstTrackOnPlaylistComplete: PropTypes.bool,\n  /** Use this to set the player's [`seekMode`](#seekmode) */\n  seekMode: PlayerPropTypes.seekMode.isRequired,\n  /**\n   * The default media element behavior is to reset the `playbackRate` to 1\n   * whenever a new source is loaded. Set this prop to `true` to maintain the\n   * same irregular playback rate across multiple tracks.\n   */\n  maintainPlaybackRate: PropTypes.bool.isRequired,\n  /**\n   * By default, activating a back skip in shuffle mode will select the previous\n   * track in the shuffled list, but if the current track was the first selected\n   * track, back skip will be disabled. Setting this prop to `true` will\n   * select new arbitrary tracks in the \"past\" if back skip is used beyond\n   * the buffered history.\n   */\n  allowBackShuffle: PropTypes.bool,\n  /**\n   * The number of seconds before pressing back skip becomes \"back to\n   * beginning of current track\" rather than \"go to the previous track\"\n   */\n  stayOnBackSkipThreshold: PropTypes.number.isRequired,\n  /**\n   * An array of [`mediaSessionAction`](#mediasessionaction) types to display\n   * in the end users's system UI, when applicable.\n   * It is *not* the same as the `controls` array.\n   */\n  supportedMediaSessionActions: PropTypes.arrayOf(\n    PlayerPropTypes.mediaSessionAction.isRequired\n  ).isRequired,\n  /** The number of seconds to seek back or forward when the Media Session API\n   * backseek/forwardseek buttons are activated in the end user's system UI\n   */\n  mediaSessionSeekLengthInSeconds: PropTypes.number.isRequired,\n  /**\n   * A function called on component mount and component unmount with a reference\n   * to the underlying media element. Generally not recommended for use, but\n   * can be used as an escape hatch for features that aren't well-supported by\n   * Cassette (if you find yourself needing this, you may want to\n   * [open a new issue](https://github.com/benwiley4000/cassette/issues/new)\n   * to talk about adding first-class support for your use case).\n   */\n  mediaElementRef: PropTypes.func,\n  /**\n   * If you're using `onStateSnapshot` to save snapshots of the media player\n   * state as a serializable object, you should pass that restored object here\n   * to preserve the user's state from the previous session\n   */\n  initialStateSnapshot: PropTypes.object,\n  /**\n   * Called whenever a new state snapshot is generated. The internals of this\n   * snapshot are not documented and may change in a non-major release, so it's\n   * not safe to rely on them directly. Instead, the state snapshot should\n   * be serialized to JSON with `JSON.stringify` and restored later with\n   * `JSON.parse` to be passed as the `initialStateSnapshot` prop\n   */\n  onStateSnapshot: PropTypes.func,\n  /**\n   * A function called whenever the active track is set or updated. Passed an\n   * object with the properties `track`, `trackIndex`, `previousTrack` and\n   * `previousTrackIndex` (these may be `null` or `undefined`)\n   */\n  onActiveTrackUpdate: PropTypes.func,\n  /**\n   * A function called when the media element's `currentTime` attribute has\n   * changed. Passed an object with the properties `currentTime`, `track` and\n   * `trackIndex`\n   */\n  onTimeUpdate: PropTypes.func,\n  /**\n   * A function called when playback of the current track has failed for some\n   * reason. Passed an object with the properties `event`,\n   * `track` and `trackIndex`\n   */\n  onTrackPlaybackFailure: PropTypes.func,\n  /**\n   * A function which receives a [`track`](#track) object (if one is active)\n   * and returns a url pointing to a poster image representing the current\n   * track which should be used in a [`VideoDisplay`](#videodisplay) when the\n   * media content hasn't yet loaded\n   */\n  getPosterImageForTrack: PropTypes.func.isRequired,\n  /**\n   * A function which receives a [`track`](#track) object (if one is active)\n   * and returns the value for the media element's `title` attribute, which\n   * may be used in iOS to display information about the current track in the\n   * system UI\n   */\n  getMediaTitleAttributeForTrack: PropTypes.func.isRequired,\n  /**\n   * Either a renderable React node or a render prop function like the\n   * one passed into [`PlayerContextConsumer`](#playercontextconsumer)\n   */\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired\n};\n\nPlayerContextProvider.defaultProps = {\n  autoplay: false,\n  autoplayDelayInSeconds: 0,\n  createMediaElement: () => document.createElement('video'),\n  gapLengthInSeconds: 0,\n  defaultVolume: 1,\n  defaultMuted: false,\n  defaultRepeatStrategy: 'playlist',\n  defaultShuffle: false,\n  defaultPlaybackRate: 1,\n  startingTrackIndex: 0,\n  loadFirstTrackOnPlaylistComplete: true,\n  seekMode: 'immediate',\n  maintainPlaybackRate: false,\n  allowBackShuffle: false,\n  stayOnBackSkipThreshold: 5,\n  supportedMediaSessionActions: ['play', 'pause', 'previoustrack', 'nexttrack'],\n  mediaSessionSeekLengthInSeconds: 10,\n  getPosterImageForTrack(track) {\n    return track && track.artwork ? track.artwork[0].src : '';\n  },\n  getMediaTitleAttributeForTrack: getDisplayText\n};\n\nexport class PlayerContextGroupMember extends Component {\n  componentDidMount() {\n    this.props.groupContext.registerMediaElement(this.mediaElement);\n  }\n\n  componentWillUnmount() {\n    // Media element might not exist\n    // (see componentWillUnmount of PlayerContextProvider)\n    if (this.mediaElement) {\n      this.props.groupContext.unregisterMediaElement(this.mediaElement);\n    }\n  }\n\n  render() {\n    const { groupContext, props } = this.props;\n    const { mediaElementRef, ...rest } = props;\n    return (\n      <PlayerContextProvider\n        {...groupContext.groupProps}\n        {...rest}\n        mediaElementRef={ref => {\n          if (mediaElementRef) {\n            mediaElementRef(ref);\n          }\n          this.mediaElement = ref;\n        }}\n      />\n    );\n  }\n}\n\nPlayerContextGroupMember.propTypes = {\n  groupContext: PropTypes.shape({\n    groupProps: PropTypes.object.isRequired,\n    registerMediaElement: PropTypes.func.isRequired,\n    unregisterMediaElement: PropTypes.func.isRequired\n  }).isRequired\n};\n\nfunction PlayerContextGroupConsumer(props) {\n  return (\n    <GroupContext.Consumer>\n      {groupContext => {\n        if (!groupContext) {\n          return createElement(PlayerContextProvider, props);\n        }\n        return createElement(PlayerContextGroupMember, {\n          groupContext,\n          props\n        });\n      }}\n    </GroupContext.Consumer>\n  );\n}\n\nexport default PlayerContextGroupConsumer;\n","// TODO: support Preact, Inferno, etc.\nfunction getReactParentNameStack(componentInstance) {\n  const fiber = componentInstance._reactInternalFiber;\n  const parentStack = [];\n  let owner = fiber;\n  if (!owner) {\n    return parentStack;\n  }\n  while ((owner = owner._debugOwner)) {\n    if (owner.type.name) {\n      parentStack.push(owner.type.name);\n    }\n  }\n  return parentStack;\n}\n\nexport default getReactParentNameStack;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport PlayerContext from './PlayerContext';\n\nimport { logWarning } from './utils/console';\nimport getReactParentNameStack from './utils/getReactParentNameStack';\n\nclass PlayerContextConsumer extends PureComponent {\n  render() {\n    const { children, filterList } = this.props;\n    if (!filterList) {\n      if (!this.warnedAboutFilterList) {\n        let warning = `\n          Please pass the filterList prop to PlayerContextConsumer in order\n          to avoid unnecessarily frequent re-renders, e.g.\n\n          const filterList = ['paused', 'onTogglePause'];\n          // ...\n          <PlayerContextConsumer filterList={filterList}>\n            {({ paused, onTogglePause }) => {\n              return <div>{/* ... */}</div>;\n            }}\n          </PlayerContextConsumer>\n        `;\n        for (const parentName of getReactParentNameStack(this)) {\n          warning += `\n            Rendered by ${parentName}`;\n        }\n        logWarning(warning);\n        this.warnedAboutFilterList = true;\n      }\n      return <PlayerContext.Consumer>{children}</PlayerContext.Consumer>;\n    }\n\n    const flags = PlayerContext.__cassetteGetObservedBits(filterList);\n    return (\n      <PlayerContext.Consumer unstable_observedBits={flags}>\n        {playerContext => {\n          const usedContext = {};\n          for (const name of filterList) {\n            if (playerContext.hasOwnProperty(name)) {\n              usedContext[name] = playerContext[name];\n            }\n          }\n          return children(usedContext);\n        }}\n      </PlayerContext.Consumer>\n    );\n  }\n}\n\nPlayerContextConsumer.propTypes = {\n  /**\n   * A [render prop](https://reactjs.org/docs/render-props.html) function\n   * which receives as its argument an object with the latest values of the\n   * keys specified in the `filterList` prop (if you forget `filterList`, you\n   * will get all the `playerContext` values and a warning in the console)\n   */\n  children: PropTypes.func.isRequired,\n  /**\n   * A full list of `playerContext` values which will need to be consumed.\n   * Similar to the prop name array passed to\n   * [`playerContextFilter`](#playercontextfilter), but only made up of values\n   * found in [`playerContext`](#playercontext).\n   *\n   */\n  filterList: PropTypes.arrayOf(PropTypes.string.isRequired)\n};\n\nexport default PlayerContextConsumer;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport GroupContext from './GroupContext';\n\n/**\n * A wrapper which can be used to share configuration among multiple descendant [`PlayerContextProvider`](#playercontextprovider) instances as well as prevent multiple media elements from playing audio simultaneously\n */\nexport class PlayerContextGroup extends Component {\n  constructor(props) {\n    super(props);\n    this.registerMediaElement = this.registerMediaElement.bind(this);\n    this.unregisterMediaElement = this.unregisterMediaElement.bind(this);\n    this.enforceOneMediaSourceOnly = this.enforceOneMediaSourceOnly.bind(this);\n    this.mediaElements = [];\n  }\n\n  registerMediaElement(elem) {\n    this.mediaElements = this.mediaElements.concat(elem);\n    elem.addEventListener('play', this.enforceOneMediaSourceOnly, true);\n    elem.addEventListener('volumechange', this.enforceOneMediaSourceOnly, true);\n  }\n\n  unregisterMediaElement(elem) {\n    this.mediaElements = this.mediaElements.filter(element => elem !== element);\n    elem.removeEventListener('play', this.enforceOneMediaSourceOnly, true);\n    elem.removeEventListener(\n      'volumechange',\n      this.enforceOneMediaSourceOnly,\n      true\n    );\n  }\n\n  enforceOneMediaSourceOnly(e) {\n    const mediaElement = e.target;\n    const { paused, muted } = mediaElement;\n    if (paused || muted) {\n      return;\n    }\n    for (const element of this.mediaElements) {\n      if (element !== mediaElement && !element.muted) {\n        element.pause();\n      }\n    }\n  }\n\n  render() {\n    return (\n      <GroupContext.Consumer>\n        {groupContext => {\n          const value = groupContext\n            ? {\n                ...groupContext,\n                groupProps: { ...groupContext.groupProps, ...this.props }\n              }\n            : {\n                groupProps: this.props,\n                registerMediaElement: this.registerMediaElement,\n                unregisterMediaElement: this.unregisterMediaElement\n              };\n          return (\n            <GroupContext.Provider value={value}>\n              {this.props.children}\n            </GroupContext.Provider>\n          );\n        }}\n      </GroupContext.Consumer>\n    );\n  }\n}\n\nPlayerContextGroup.propTypes = {\n  children: PropTypes.node.isRequired\n};\n\nexport default PlayerContextGroup;\n","import createSingleGlobalContext from './utils/createSingleGlobalContext';\nimport { logWarning } from './utils/console';\n\nexport default createSingleGlobalContext({\n  displayName: 'FullscreenContext',\n  defaultValue: {\n    fullscreen: false,\n    requestFullscreen() {\n      logWarning(\n        'Fullscreen request ignored since there is no ' +\n          'FullscreenContextProvider ancestor.'\n      );\n    },\n    requestExitFullscreen() {\n      logWarning(\n        'Exit fullscreen request ignored since there is no ' +\n          'FullscreenContextProvider ancestor.'\n      );\n    }\n  },\n  keysWillUpdate: ['fullscreen']\n});\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport FullscreenContext from './FullscreenContext';\n\nconst fullscreenStyle = {\n  width: '100%',\n  height: '100%'\n};\n\n/**\n * Wraps an area which should be fullscreen-able\n */\nexport class FullscreenContextProvider extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fullscreen: false\n    };\n    this.requestFullscreen = this.requestFullscreen.bind(this);\n    this.requestExitFullscreen = this.requestExitFullscreen.bind(this);\n    this.handleFullscreenChange = this.handleFullscreenChange.bind(this);\n    this.fullscreenElement = null;\n  }\n\n  componentDidMount() {\n    document.addEventListener('fullscreenchange', this.handleFullscreenChange);\n    document.addEventListener(\n      'webkitfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.addEventListener(\n      'mozfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.addEventListener(\n      'msfullscreenchange',\n      this.handleFullscreenChange\n    );\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\n      'fullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.removeEventListener(\n      'webkitfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.removeEventListener(\n      'mozfullscreenchange',\n      this.handleFullscreenChange\n    );\n    document.removeEventListener(\n      'msfullscreenchange',\n      this.handleFullscreenChange\n    );\n  }\n\n  requestFullscreen() {\n    if (!this.props.fullscreenEnabled) {\n      return;\n    }\n    if (this.fullscreenElement.requestFullscreen) {\n      this.fullscreenElement.requestFullscreen();\n    } else if (this.fullscreenElement.webkitRequestFullscreen) {\n      this.fullscreenElement.webkitRequestFullscreen();\n    } else if (this.fullscreenElement.mozRequestFullscreen) {\n      this.fullscreenElement.mozRequestFullScreen();\n    } else if (this.fullscreenElement.msRequestFullscreen) {\n      this.fullscreenElement.msRequestFullscreen();\n    }\n  }\n\n  requestExitFullscreen() {\n    if (document.exitFullscreen) {\n      document.exitFullscreen();\n    } else if (document.webkitExitFullscreen) {\n      document.webkitExitFullscreen();\n    } else if (document.webkitCancelFullScreen) {\n      document.webkitCancelFullScreen();\n    } else if (document.mozCancelFullScreen) {\n      document.mozCancelFullScreen();\n    } else if (document.msExitFullscreen) {\n      document.mozExitFullscreen();\n    }\n  }\n\n  handleFullscreenChange() {\n    const documentFullscreenElement =\n      document.fullscreenElement ||\n      document.webkitFullscreenElement ||\n      document.mozFullScreenElement ||\n      document.msFullscreenElement;\n    this.setState({\n      fullscreen: documentFullscreenElement === this.fullscreenElement\n    });\n  }\n\n  getFullscreenContext() {\n    const fullscreenContext = {\n      fullscreen: this.state.fullscreen,\n      requestFullscreen: this.requestFullscreen,\n      requestExitFullscreen: this.requestExitFullscreen\n    };\n    if (\n      this.fullscreenContext &&\n      fullscreenContext.fullscreen === this.fullscreenContext.fullscreen\n    ) {\n      // no change\n      return this.fullscreenContext;\n    }\n    return (this.fullscreenContext = fullscreenContext);\n  }\n\n  render() {\n    const fullscreenContext = this.getFullscreenContext();\n    return (\n      <div\n        ref={elem => (this.fullscreenElement = elem)}\n        style={this.state.fullscreen ? fullscreenStyle : undefined}\n      >\n        <FullscreenContext.Provider value={fullscreenContext}>\n          {typeof this.props.children === 'function'\n            ? this.props.children(fullscreenContext)\n            : this.props.children}\n        </FullscreenContext.Provider>\n      </div>\n    );\n  }\n}\n\nFullscreenContextProvider.propTypes = {\n  /** If set `false`, disables fullscreen for the wrapped area */\n  fullscreenEnabled: PropTypes.bool.isRequired,\n  /**\n   * Either a renderable React node or a render prop function like the\n   * one passed into [`FullscreenContextConsumer`](#fullscreencontextconsumer)\n   */\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]).isRequired\n};\n\nFullscreenContextProvider.defaultProps = {\n  fullscreenEnabled: true\n};\n\nexport default FullscreenContextProvider;\n","import React, { createElement } from 'react';\n\nimport PlayerContext from './PlayerContext';\nimport FullscreenContext from './FullscreenContext';\nimport { logWarning } from './utils/console';\n\nfunction playerContextFilter(component, contextPropNames) {\n  const warned = {};\n  const childName = component.displayName || component.name;\n  const flags = PlayerContext.__cassetteGetObservedBits(contextPropNames);\n  function PlayerContextFilter(props) {\n    return (\n      <FullscreenContext.Consumer>\n        {fullscreenContext => (\n          <PlayerContext.Consumer unstable_observedBits={flags}>\n            {playerContext => {\n              const childProps = { ...props };\n              for (const propName of contextPropNames) {\n                if (playerContext.hasOwnProperty(propName)) {\n                  childProps[propName] = playerContext[propName];\n                } else if (fullscreenContext.hasOwnProperty(propName)) {\n                  childProps[propName] = fullscreenContext[propName];\n                } else if (!warned[propName]) {\n                  logWarning(\n                    \"Prop '\" +\n                      propName +\n                      \"' for component \" +\n                      childName +\n                      ' not found in playerContext or fullscreenContext.'\n                  );\n                  warned[propName] = true;\n                }\n              }\n              return createElement(component, childProps);\n            }}\n          </PlayerContext.Consumer>\n        )}\n      </FullscreenContext.Consumer>\n    );\n  }\n  if (childName) {\n    PlayerContextFilter.displayName = `PlayerContextFilter(${childName})`;\n  }\n  return PlayerContextFilter;\n}\n\nexport default playerContextFilter;\n","import PlayerContextProvider from './PlayerContextProvider';\nimport PlayerContext from './PlayerContext';\nimport PlayerContextConsumer from './PlayerContextConsumer';\nimport PlayerContextGroup from './PlayerContextGroup';\nimport FullscreenContextProvider from './FullscreenContextProvider';\nimport FullscreenContext from './FullscreenContext';\nimport playerContextFilter from './playerContextFilter';\nimport * as PlayerPropTypes from './PlayerPropTypes';\n\nexport { PlayerContextProvider };\nexport { PlayerContextConsumer };\nexport { PlayerContextGroup };\nexport { FullscreenContextProvider };\nexport const FullscreenContextConsumer = FullscreenContext.Consumer;\nexport { playerContextFilter };\nexport { PlayerPropTypes };\n\n// undocumented exports\nexport * from './utils/console';\nexport {\n  default as convertToNumberWithinIntervalBounds\n} from './utils/convertToNumberWithinIntervalBounds';\nexport { default as isPlaylistValid } from './utils/isPlaylistValid';\nexport { default as getDisplayText } from './utils/getDisplayText';\nexport { repeatStrategyOptions } from './constants';\nexport const donotuse_PlayerContext = PlayerContext;\nexport const donotuse_FullscreenContext = FullscreenContext;\n"],"sourceRoot":""}