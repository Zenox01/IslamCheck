!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@cassette/core"),require("@cassette/components")):"function"==typeof define&&define.amd?define(["react","@cassette/core","@cassette/components"],t):"object"==typeof exports?exports.cassettePlayer=t(require("react"),require("@cassette/core"),require("@cassette/components")):e.cassettePlayer=t(e.React,e.cassetteCore,e.cassetteComponents)}("undefined"!=typeof self?self:this,function(e,t,r){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist",r(r.s=14)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13c2.75-.63 5.26-1.89 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z",key:0}),n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M14 18v12h8l10 10V8L22 18h-8z",key:0}),n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z",key:0}),n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z",key:0}),n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),n.createElement("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),n.createElement("path",{d:"M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8zm-8-4V18h-2l-4 2v2h3v8h3z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),n.createElement("path",{d:"M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),n.createElement("path",{d:"M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){var n=r(0);function a(e){return n.createElement("svg",e,[n.createElement("path",{d:"M0 0h48v48H0z",fill:"none",key:0}),n.createElement("path",{d:"M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z",key:1})])}a.defaultProps={width:"48",height:"48",viewBox:"0 0 48 48"},e.exports=a,a.default=a},function(e,t,r){},,function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(1),s=r(2);function l(e){return e&&"object"==typeof e?Object.keys(e).filter(t=>e[t]).join(" "):e}var i=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(l).filter(Boolean).join(" ")};function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var u=Object(n.forwardRef)((e,t)=>{let r=e.className,n=e.children,o=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["className","children"]);return a.a.createElement("div",c({ref:t,className:i("cassette__media_button_wrapper",r)},o),n)});var d=Object(o.playerContextFilter)(class extends n.PureComponent{render(){const e=this.props,t=e.paused,r=e.awaitingPlayResume,n=e.activeTrackIndex,o=e.onTogglePause,s=e.onSelectTrackIndex,l=e.trackIndex,c=void 0===l?n:l,d=n===c;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__play_pause_button cassette__media_button",{playing:d&&(!t||r)}),onClick:d?o:()=>s(c)},a.a.createElement("div",{className:"foreground"},a.a.createElement("div",{className:"left"}),a.a.createElement("div",{className:"right"}))))}},["paused","awaitingPlayResume","activeTrackIndex","onTogglePause","onSelectTrackIndex"]);var m=class extends n.PureComponent{render(){const e=this.props,t=e.back,r=e.onClick;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__skip_button cassette__media_button",{back:t}),onClick:r},a.a.createElement("div",{className:"skip_button_inner foreground"},a.a.createElement("div",{className:"right_facing_triangle"}),a.a.createElement("div",{className:"right_facing_triangle"}),a.a.createElement("div",{className:"vertical_bar"}))))}};var h=Object(o.playerContextFilter)(class extends n.PureComponent{render(){return a.a.createElement(m,{back:!0,onClick:this.props.onBackSkip})}},["onBackSkip"]);var p=Object(o.playerContextFilter)(class extends n.PureComponent{render(){return a.a.createElement(m,{onClick:this.props.onForwardSkip})}},["onForwardSkip"]),v=r(3),f=r.n(v),g=r(4),y=r.n(g),_=r(5),b=r.n(_),E=r(6),x=r.n(E);var P=function(e,t){return t?f.a:0===e?y.a:e<=.5?b.a:x.a};var C=function(e){switch(e){case"rightabove":case"rightbelow":return"right";case"hiddenup":case"upabove":default:return"up"}};var k=function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()};const M={touchAction:"none"},T={opacity:0};var B=Object(o.playerContextFilter)(class extends n.PureComponent{static getDerivedStateFromProps(e,t){const r=t.hover,n=t.volumeBarFocused;return!t.volumeBarPosition||r||n||e.setVolumeInProgress?null:{volumeBarPosition:null}}constructor(e){super(e),this.state={hover:!1,volumeBarFocused:!1,volumeBarPosition:null},this.volumeControlRef=null,this.muteToggleRef=null,this.volumeBarContainerRef=null,this.setVolumeControlRef=this.setVolumeControlRef.bind(this),this.setMuteToggleRef=this.setMuteToggleRef.bind(this),this.setVolumeBarContainerRef=this.setVolumeBarContainerRef.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.handleVolumeBarFocus=this.handleVolumeBarFocus.bind(this),this.handleVolumeBarBlur=this.handleVolumeBarBlur.bind(this),this.handleMuteToggleTouchStart=this.handleMuteToggleTouchStart.bind(this)}componentDidMount(){this.muteToggleRef.addEventListener("touchstart",this.handleMuteToggleTouchStart),document.addEventListener("touchstart",this.handleMouseLeave)}componentDidUpdate(){const e=this.state.volumeBarPosition;if("hiddenup"===e||"hiddenright"===e){const t=this.volumeControlRef.getBoundingClientRect(),r=t.top,n=this.volumeBarContainerRef.offsetHeight;let a;a="hiddenup"===e?n<=r?"upabove":"hiddenright":n<=r?"rightabove":n<=document.documentElement.clientHeight-t.bottom?"rightbelow":null,this.setState({volumeBarPosition:a})}}componentWillUnmount(){this.muteToggleRef.removeEventListener("touchstart",this.handleMuteToggleTouchStart),document.removeEventListener("touchstart",this.handleMouseLeave)}setVolumeControlRef(e){this.volumeControlRef=e}setMuteToggleRef(e){this.muteToggleRef=e}setVolumeBarContainerRef(e){this.volumeBarContainerRef=e}handleMouseEnter(){this.setState(e=>({hover:!0,volumeBarPosition:e.volumeBarPosition||"hiddenup"}))}handleMouseLeave(){this.setState(e=>({hover:!1,volumeBarPosition:e.volumeBarFocused||this.props.setVolumeInProgress?e.volumeBarPosition:null}))}handleVolumeBarFocus(){this.setState(e=>({volumeBarFocused:!0,volumeBarPosition:e.volumeBarPosition||"hiddenup"}))}handleVolumeBarBlur(){this.setState(e=>({volumeBarFocused:!1,volumeBarPosition:e.hover||this.props.setVolumeInProgress?e.volumeBarPosition:null}))}handleMuteToggleTouchStart(e){this.state.hover||this.state.volumeBarFocused||(e.preventDefault(),this.handleMouseEnter())}renderHandle(){return a.a.createElement("div",{className:i("handle",{highlight:this.props.setVolumeInProgress})},a.a.createElement("div",null))}render(){const e=this.props,t=e.volume,r=e.muted,n=e.onSetVolume,o=e.onSetVolumeComplete,l=e.onToggleMuted,c=this.state,d=c.hover,m=c.volumeBarFocused,h=c.volumeBarPosition,p=P(t,r);return a.a.createElement(u,{ref:this.setVolumeControlRef,className:"cassette__volume_control",style:M,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouchStart:k},a.a.createElement("button",{ref:this.setMuteToggleRef,type:"button",className:i("cassette__material_toggle cassette__media_button cassette__mute_btn",{highlight:d||m,on:!r}),onClick:l},a.a.createElement("div",{className:"foreground inner"},a.a.createElement(p,{width:"100%",height:"100%"}))),a.a.createElement("div",{style:h?void 0:T,ref:this.setVolumeBarContainerRef,className:i("cassette__volume_control__volume_bar_container",h),onFocus:this.handleVolumeBarFocus,onBlur:this.handleVolumeBarBlur},a.a.createElement(s.ProgressBar,{className:i("cassette__volume_control__volume_bar",h),progressClassName:"volume",progress:r?0:t,progressDirection:C(h),handle:this.renderHandle(),onAdjustProgress:n,onAdjustComplete:o})))}},["volume","muted","setVolumeInProgress","onSetVolume","onSetVolumeComplete","onToggleMuted"]);var w=Object(o.playerContextFilter)(class extends n.PureComponent{render(){const e=this.props,t=e.volume,r=e.muted,n=e.onToggleMuted,o=P(t,r);return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__mute_btn",{on:!r}),onClick:n},a.a.createElement("div",{className:"foreground inner"},a.a.createElement(o,{width:"100%",height:"100%"}))))}},["volume","muted","onToggleMuted"]),S=r(7),V=r.n(S),N=r(8),O=r.n(N);var j=Object(o.playerContextFilter)(class extends n.PureComponent{constructor(e){super(e),this.handleNextRepeatStrategy=this.handleNextRepeatStrategy.bind(this)}handleNextRepeatStrategy(){this.props.onSetRepeatStrategy(function(e){let t=o.repeatStrategyOptions.indexOf(e)+1;return t>=o.repeatStrategyOptions.length&&(t=0),o.repeatStrategyOptions[t]}(this.props.repeatStrategy))}render(){const e=this.props.repeatStrategy,t="track"===e?O.a:V.a;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__repeat_btn",{on:"none"!==e}),onClick:this.handleNextRepeatStrategy},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(t,{width:"100%",height:"100%"}))))}},["repeatStrategy","onSetRepeatStrategy"]),z=r(9),F=r.n(z);var R=Object(o.playerContextFilter)(class extends n.PureComponent{render(){const e=this.props,t=e.shuffle,r=e.onToggleShuffle;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__shuffle_btn",{on:t}),onClick:r},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(F.a,{width:"100%",height:"100%"}))))}},["shuffle","onToggleShuffle"]);var D=class extends n.PureComponent{render(){const e=this.props,t=e.style,r=e.displayText,n=e.displayTime;return a.a.createElement("div",{className:"cassette__media_status_bar",style:t},a.a.createElement("div",{className:"cassette__media_info_marquee"},a.a.createElement(s.MaybeMarquee,{content:r})),a.a.createElement("div",{className:"cassette__media_time_progress"},n))}};var H=function(e){const t=Math.floor(e/3600),r=Math.floor(e/60)-60*t,n=Math.floor(e%60);let a=t>0?`${t}:`:"";return a+=`${r<10&&t>0?"0":""}${r}:`,a+=`${n<10?"0":""}${n}`};const L={pointerEvents:"none"};class I extends n.PureComponent{render(){const e=this.props,t=e.playlist,r=e.activeTrackIndex,n=e.currentTime,o=e.seekPreviewTime,l=e.seekInProgress,i=e.duration,c=e.getDisplayText,u=e.durationOverride,d=void 0===u?i:u,m=l?o:n;return a.a.createElement("div",{className:"cassette__media_progress_container"},a.a.createElement(s.MediaProgressBar,{className:"cassette__media_progress_bar",progressClassName:"progress",progressDirection:"right"}),a.a.createElement(D,{style:L,displayText:c(t[r])||"",displayTime:`${H(m)} / ${H(d)}`}))}}I.defaultProps={getDisplayText:o.getDisplayText};var q=Object(o.playerContextFilter)(I,["playlist","activeTrackIndex","currentTime","seekPreviewTime","seekInProgress","duration"]);class $ extends n.PureComponent{render(){const e=this.props,t=e.playlist,r=e.activeTrackIndex,n=e.currentTime,o=e.duration,l=e.getDisplayText,i=e.durationOverride,c=void 0===i?o:i;return a.a.createElement("div",{className:"cassette__media_progress_container"},a.a.createElement(s.MediaProgressBarDisplay,{className:"cassette__media_progress_bar",progressClassName:"progress",progressDirection:"right"}),a.a.createElement(D,{displayText:l(t[r])||"",displayTime:`${H(n)} / ${H(c)}`}))}}$.defaultProps={getDisplayText:o.getDisplayText};var K=Object(o.playerContextFilter)($,["playlist","activeTrackIndex","currentTime","duration"]),A=r(10),U=r.n(A),W=r(11),G=r.n(W);var J=Object(o.playerContextFilter)(class extends n.PureComponent{render(){const e=this.props,t=e.fullscreen,r=e.requestFullscreen,n=e.requestExitFullscreen,o=t?G.a:U.a;return a.a.createElement(u,null,a.a.createElement("button",{type:"button",className:i("cassette__material_toggle cassette__media_button cassette__fullscreen_btn",{on:t}),onClick:t?n:r},a.a.createElement("div",{className:"inner foreground"},a.a.createElement(o,{width:"100%",height:"100%"}))))}},["fullscreen","requestFullscreen","requestExitFullscreen"]);var Q=class extends n.PureComponent{render(){return a.a.createElement(u,null,a.a.createElement("div",{className:"cassette__spacer"}))}};const X={playpause:d,backskip:h,forwardskip:p,volume:B,mute:w,repeat:j,shuffle:R,progress:q,progressdisplay:K,fullscreen:J,spacer:Q};const Y={};var Z=function(e){if("function"==typeof e)return e;if("string"==typeof e){if(Y[e])return Y[e];const t=function(e){const t=X[e];if(!t)return null;switch(e){case"progress":case"progressdisplay":return(e,r,a)=>{let o=a.getDisplayText;return Object(n.createElement)(t,{getDisplayText:o})};default:return()=>Object(n.createElement)(t)}}(e);return Y[e]=t,t}return null};r(12);let ee=0;class te extends n.Component{getKeyedChildren(e){this.controlKeys=this.controlKeys||new Map;const t=new Map;return e.map(e=>{if(!e)return e;const r=e.type||e.nodeName||e.tag||"",n=t.get(r)||0;t.set(r,n+1);const o=this.controlKeys.get(r)||[];let s;return o[n]?s=o[n]:(s=(ee++).toString(),this.controlKeys.set(r,o.concat(s))),a.a.cloneElement(e,{key:s})})}render(){const e=this.props,t=e.getDisplayText,r=e.controls,n=e.showVideo,s=e.renderVideoDisplay;return a.a.createElement(o.FullscreenContextConsumer,null,e=>a.a.createElement(o.donotuse_PlayerContext.Consumer,null,o=>a.a.createElement("div",{className:"cassette"},n&&s(o,e),a.a.createElement("div",{className:"cassette__control_bar",title:t(o.playlist[o.activeTrackIndex])},this.getKeyedChildren(r.map(r=>{const n=Z(r);return n&&n(o,e,{getDisplayText:t})}))))))}}te.defaultProps={controls:["spacer","backskip","playpause","forwardskip","spacer","progress"],getDisplayText:o.getDisplayText,showVideo:!1,renderVideoDisplay:(e,t)=>a.a.createElement(s.VideoDisplay,{className:"cassette__video_display_container",onClick:e.onTogglePause})};var re=te;function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ae extends n.Component{render(){const e=this.props,t=e.getDisplayText,r=e.controls,n=e.showVideo,s=e.renderVideoDisplay,l=e.fullscreenEnabled,i=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,["getDisplayText","controls","showVideo","renderVideoDisplay","fullscreenEnabled"]);return a.a.createElement(o.FullscreenContextProvider,{fullscreenEnabled:l},a.a.createElement(o.PlayerContextProvider,i,a.a.createElement(re,{getDisplayText:t,controls:r,showVideo:n,renderVideoDisplay:s})))}}delete ae.propTypes.children,ae.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ne(e,t,r[t])})}return e}({},o.PlayerContextProvider.defaultProps,re.defaultProps,o.FullscreenContextProvider.defaultProps),delete ae.defaultProps.children;var oe=ae;r.d(t,"MediaPlayer",function(){return oe}),r.d(t,"MediaPlayerControls",function(){return re}),r.d(t,"PlayPauseButton",function(){return d}),r.d(t,"BackSkipButton",function(){return h}),r.d(t,"ForwardSkipButton",function(){return p}),r.d(t,"VolumeControl",function(){return B}),r.d(t,"MuteButton",function(){return w}),r.d(t,"RepeatButton",function(){return j}),r.d(t,"ShuffleButton",function(){return R}),r.d(t,"FullscreenButton",function(){return J}),r.d(t,"MediaProgress",function(){return q}),r.d(t,"MediaProgressDisplay",function(){return K}),r.d(t,"Spacer",function(){return Q})}])});
//# sourceMappingURL=cassette-player.min.js.map