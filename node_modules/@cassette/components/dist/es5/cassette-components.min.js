!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@cassette/core"),require("resize-observer-polyfill")):"function"==typeof define&&define.amd?define(["react","@cassette/core","resize-observer-polyfill"],t):"object"==typeof exports?exports.cassetteComponents=t(require("react"),require("@cassette/core"),require("resize-observer-polyfill")):e.cassetteComponents=t(e.React,e.cassetteCore,e.ResizeObserver)}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist",n(n.s=3)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";n.r(t);var r,o,i=n(0),s=n.n(i),a=n(2),l=n.n(a);"undefined"!=typeof document&&(void 0!==document.hidden?(r="hidden",o="visibilitychange"):void 0!==document.msHidden?(r="msHidden",o="msvisibilitychange"):void 0!==document.webkitHidden&&(r="webkitHidden",o="webkitvisibilitychange"));var c=function(e){if(r&&document[r]){var t,n=!1;return document.addEventListener(o,function(){n||(t=requestAnimationFrame(e))},{once:!0}),function(){n=!0,cancelAnimationFrame(t)}}var i=requestAnimationFrame(e);return function(){return cancelAnimationFrame(i)}};function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var p="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return Date.now()};function f(e){return e+"px"}var m=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={contentHeight:0},n.moveMarquee=n.moveMarquee.bind(h(h(n))),n.handleResize=n.handleResize.bind(h(h(n))),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){this.requestMoveMarqueeAnimationFrame(),this.marqueeContainerElementWidth=getComputedStyle(this.marqueeContainerElement).width;var e=getComputedStyle(this.movingContentContainerElement);this.movingContentContainerElementWidth=e.width,this.setState({contentHeight:e.height}),this.resizeObserver=new l.a(this.handleResize),this.resizeObserver.observe(this.marqueeContainerElement),this.resizeObserver.observe(this.movingContentContainerElement),this.lastMovementTime=p()},n.componentWillUnmount=function(){this.cancelRaf(),this.resizeObserver.disconnect()},n.requestMoveMarqueeAnimationFrame=function(){this.cancelRaf=c(this.moveMarquee)},n.moveMarquee=function(){var e=this.props,t=e.pixelsPerSecond,n=e.scrollDirection,r=p(),o=r-this.lastMovementTime;if(this.lastMovementTime=r,"left"===n?this.movingContentContainerElement.style.right=void 0:this.movingContentContainerElement.style.left=void 0,this.marqueeContainerElementWidth>=this.movingContentContainerElementWidth)this.movingContentContainerElement.style[n]=0;else{var i=t*o/1e3,s=function(e){return Number(e.slice(0,-2))}(this.movingContentContainerElement.style[n])-i;s>0-this.movingContentContainerElementWidth?this.movingContentContainerElement.style[n]=f(s):this.movingContentContainerElement.style[n]=f(this.marqueeContainerElementWidth)}this.requestMoveMarqueeAnimationFrame()},n.handleResize=function(e){var t=e,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if((r=t.next()).done)break;o=r.value}var i=o;i.target===this.marqueeContainerElement&&(this.marqueeContainerElementWidth=i.contentRect.width),i.target===this.movingContentContainerElement&&(this.movingContentContainerElementWidth=i.contentRect.width,this.setState({contentHeight:i.contentRect.height}))}},n.render=function(){var e=this,t=this.props,n=t.content,r=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["content"]);return delete r.pixelsPerSecond,delete r.scrollDirection,s.a.createElement("div",u({},r,{ref:function(t){return e.marqueeContainerElement=t},style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}({position:"relative",overflow:"hidden",height:this.state.contentHeight},r.style||{})}),s.a.createElement("div",{ref:function(t){return e.movingContentContainerElement=t},style:{position:"absolute",whiteSpace:"nowrap"}},n))},t}(i.PureComponent);m.defaultProps={pixelsPerSecond:30,scrollDirection:"left"};var v=m,g=n(1);var y=function(e,t){var n=100*(1-(e||0))+"%",r={position:"absolute",left:0,right:0,top:0,bottom:0};switch(t){case"left":r.left=n,r.willChange="left";break;case"right":r.right=n,r.willChange="right";break;case"up":r.top=n,r.willChange="top";break;case"down":r.bottom=n,r.willChange="bottom"}return r};var b=function(e,t){var n=100*(e||0)+"%",r={position:"absolute",transform:"translate(-50%, -50%)"};switch(t){case"left":r.top="50%",r.right=n,r.willChange="right",r.transform="translate(50%, -50%)";break;case"right":r.top="50%",r.left=n,r.willChange="left",r.transform="translate(-50%, -50%)";break;case"up":r.left="50%",r.bottom=n,r.willChange="bottom",r.transform="translate(-50%, 50%)";break;case"down":r.left="50%",r.top=n,r.willChange="top",r.transform="translate(-50%, -50%)"}return r};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O,j,P,E,S=function(e){function t(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.render=function(){var e=this.props,t=e.progressClassName,n=e.progressStyle,r=e.progress,o=e.progressDirection,i=e.handle,a=e.progressBarRef,l=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["progressClassName","progressStyle","progress","progressDirection","handle","progressBarRef"]);return s.a.createElement("div",w({},l,{ref:a}),s.a.createElement("div",{style:{position:"relative",width:"100%",height:"100%",touchAction:"none"}},s.a.createElement("div",{className:t,style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){C(e,t,n[t])})}return e}({},n||{},y(r,o))}),i&&s.a.createElement("div",{style:b(r,o)},i)))},t}(i.PureComponent),k=Object(i.forwardRef)(function(e,t){return s.a.createElement(S,w({},e,{progressBarRef:t}))}),A=20,x=["top","right","bottom","left","width","height","size","weight"],R="undefined"!=typeof MutationObserver,M=new Set,D=new Map,T=new Map,H=!1;function _(){clearTimeout(E);var e=[],t=M,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var o;if(n){if(r>=t.length)break;o=t[r++]}else{if((r=t.next()).done)break;o=r.value}var i=o,s=q(i);V(D.get(i),s)&&(D.set(i,s),e.push(i))}for(var a=0;a<e.length;a++){var l=e[a];T.get(l)(D.get(l))}e.length&&(E=setTimeout(_,A))}function L(){O=document.body.scrollTop,j=document.body.scrollLeft}function W(e){var t=e.propertyName,n=void 0===t?"":t;x.some(function(e){return-1!==n.indexOf(e)})&&_()}function q(e){var t=e.getBoundingClientRect();return{pageTop:t.top+O,pageLeft:t.left+j,width:t.width,height:t.height}}function V(e,t){return e.pageTop!==t.pageTop||e.pageLeft!==t.pageLeft||e.width!==t.width||e.height!==t.height}var z=function(e,t){return M.size||H||(document.addEventListener("transitionend",W),window.addEventListener("resize",_),R?(P=new MutationObserver(_)).observe(document,{attributes:!0,subtree:!0}):document.addEventListener("DOMSubtreeModified",_),document.addEventListener("scroll",L),L(),H=!0),M.add(e),D.set(e,q(e)),T.set(e,t),t(D.get(e)),function(){M.delete(e),D.delete(e),T.delete(e),M.size||H&&(document.removeEventListener("transitionend",W),window.removeEventListener("resize",_),R?P.disconnect():document.removeEventListener("DOMSubtreeModified",_),document.removeEventListener("scroll",L),H=!1)}};function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={adjusting:!1,tempProgress:null},n.progressContainer=null,n.setProgressContainerRef=n.setProgressContainerRef.bind(N(N(n))),n.handleAdjustProgress=n.handleAdjustProgress.bind(N(N(n))),n.handleAdjustComplete=n.handleAdjustComplete.bind(N(N(n))),n.handleKeyDown=n.handleKeyDown.bind(N(N(n))),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;window.addEventListener("mousemove",this.handleAdjustProgress),document.addEventListener("touchmove",this.handleAdjustProgress),window.addEventListener("mouseup",this.handleAdjustComplete),document.addEventListener("touchend",this.handleAdjustComplete),this.unobserve=z(this.progressContainer,function(t){e.cachedContainerRect=t}),setTimeout(function(){var t=document.createElement("style"),n="noselect_"+Math.random().toString(16).slice(2,7);t.innerText="."+n+"{\ncursor: default;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  -webkit-touch-callout: none;\n}",document.body.appendChild(t),e.noselectStyleElement=t,e.noselectClassName=n})},n.componentDidUpdate=function(e,t){var n=this.state,r=n.adjusting,o=n.tempProgress;r&&o!==t.tempProgress&&this.props.onAdjustProgress(o)},n.componentWillUnmount=function(){window.removeEventListener("mousemove",this.handleAdjustProgress),document.removeEventListener("touchmove",this.handleAdjustProgress),window.removeEventListener("mouseup",this.handleAdjustComplete),document.removeEventListener("touchend",this.handleAdjustComplete),this.unobserve(),this.toggleNoselect(!1),this.noselectStyleElement&&this.noselectStyleElement.parentNode.removeChild(this.noselectStyleElement)},n.setProgressContainerRef=function(e){this.progressContainer=e},n.toggleNoselect=function(e){document.body.classList[e?"add":"remove"](this.noselectClassName)},n.getProgressFromPageCoordinates=function(e,t){var n=this.cachedContainerRect,r=n.pageLeft,o=n.pageTop,i=n.width,s=n.height;switch(this.props.progressDirection){case"down":return(t-o)/s;case"left":return 1-(e-r)/i;case"up":return 1-(t-o)/s;case"right":default:return(e-r)/i}},n.handleAdjustProgress=function(e){if(!this.props.readonly){if("mousedown"===e.type||"touchstart"===e.type)this.toggleNoselect(!0);else if(!this.state.adjusting)return;e.preventDefault();var t="touch"===e.type.slice(0,5),n=t?e.targetTouches.item(0).pageX:e.pageX,r=t?e.targetTouches.item(0).pageY:e.pageY,o=this.getProgressFromPageCoordinates(n,r),i=Object(g.convertToNumberWithinIntervalBounds)(o,0,1);this.setState({adjusting:!0,tempProgress:i})}},n.handleAdjustComplete=function(e){var t=this.props.onAdjustComplete;this.toggleNoselect(!1);var n=this.state,r=n.adjusting,o=n.tempProgress;r&&(e.preventDefault(),this.setState({adjusting:!1,tempProgress:null}),t(o))},n.handleKeyDown=function(e){if(!this.props.readonly){var t=this.props.progress;switch(e.keyCode){case 37:case 40:t-=.01;break;case 38:case 39:t+=.01;break;default:return}e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState({adjusting:!0,tempProgress:Object(g.convertToNumberWithinIntervalBounds)(t,0,1)})}},n.render=function(){var e=this.props,t=e.progressClassName,n=e.progressStyle,r=e.progress,o=e.progressDirection,i=e.handle,a=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["progressClassName","progressStyle","progress","progressDirection","handle"]),l=this.state,c=l.adjusting,u=l.tempProgress;return delete a.readonly,delete a.onAdjustProgress,delete a.onAdjustComplete,s.a.createElement(k,F({tabIndex:0},a,{role:"slider",ref:this.setProgressContainerRef,progressClassName:t,progressStyle:n,progress:c?u:r,progressDirection:o,handle:i,onMouseDown:this.handleAdjustProgress,onTouchStart:this.handleAdjustProgress,onKeyDown:this.handleKeyDown,onKeyUp:this.handleAdjustComplete,onBlur:this.handleAdjustComplete}))},t}(i.PureComponent);I.defaultProps={readonly:!1};var B=I;function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var X=function(e){function t(t){var n;return(n=e.call(this,t)||this).handleSeekPreview=n.handleSeekPreview.bind(K(K(n))),n.handleSeekComplete=n.handleSeekComplete.bind(K(K(n))),n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e);var n=t.prototype;return n.handleSeekPreview=function(e){this.props.onSeekPreview(e*this.props.duration)},n.handleSeekComplete=function(e){this.props.onSeekComplete(e*this.props.duration)},n.render=function(){var e=this.props,t=e.playlist,n=e.currentTime,r=e.seekPreviewTime,o=e.seekInProgress,i=e.duration,a=e.durationOverride,l=void 0===a?i:a,c=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["playlist","currentTime","seekPreviewTime","seekInProgress","duration","durationOverride"]);delete c.onSeekPreview,delete c.onSeekComplete;var u=l?(o?r:n)/l:0;return s.a.createElement(B,U({},c,{progress:u,readonly:!Object(g.isPlaylistValid)(t),onAdjustProgress:this.handleSeekPreview,onAdjustComplete:this.handleSeekComplete}))},t}(i.PureComponent),Y=Object(g.playerContextFilter)(X,["playlist","currentTime","seekPreviewTime","seekInProgress","duration","onSeekPreview","onSeekComplete"]);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=function(e){function t(){return e.apply(this,arguments)||this}return function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(t,e),t.prototype.render=function(){var e=this.props,t=e.currentTime,n=e.duration,r=e.durationOverride,o=void 0===r?n:r,i=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["currentTime","duration","durationOverride"]),a=o?t/o:0;return s.a.createElement(k,G({},i,{progress:a}))},t}(i.PureComponent),Q=Object(g.playerContextFilter)(J,["currentTime","duration"]);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var te=function(e){function t(){return e.apply(this,arguments)||this}ee(t,e);var n=t.prototype;return n.componentDidMount=function(){this.div.appendChild(this.props.canvas)},n.render=function(){var e=this;return s.a.createElement("div",{style:{width:this.props.containerWidth},ref:function(t){return e.div=t}})},t}(i.Component),ne=function(e){function t(t){var n;return(n=e.call(this,t)||this).containerWidth=0,n.containerHeight=0,n.hostedVideo=null,n.videoFrameAtTimeLastVacated=null,n}ee(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;this.containerResizeObserver=new l.a(this.handleContainerResize.bind(this)),this.containerResizeObserver.observe(this.containerElement),this.props.registerVideoHostElement(this.containerElement,{onHostOccupied:function(t){t.style.width=e.containerWidth+"px",t.style.maxHeight=e.containerHeight+"px",e.hostedVideo=t,e.forceUpdate()},onHostVacated:function(t){var n=document.createElement("canvas");n.width=t.videoWidth,n.height=t.videoHeight,n.getContext("2d").drawImage(t,0,0,n.width,n.height),n.style.maxWidth="100%",n.style.verticalAlign="middle",e.videoFrameAtTimeLastVacated=n,e.hostedVideo=null,e.forceUpdate()}}),this.props.renderVideoIntoHostElement(this.containerElement)},n.componentWillUnmount=function(){this.containerResizeObserver.disconnect(),this.props.unregisterVideoHostElement(this.containerElement)},n.handleContainerResize=function(){var e=this.containerElement,t=e.offsetWidth,n=e.offsetHeight;t===this.containerWidth&&n===this.containerHeight||(this.hostedVideo&&(this.hostedVideo.style.width=t+"px",this.hostedVideo.style.maxHeight=n+"px"),this.containerWidth=t,this.containerHeight=n,this.forceUpdate())},n.render=function(){var e=this,t=this.props,n=t.aspectRatio,r=t.fullscreen,o=t.maintainAspectRatioInFullscreen,i=t.renderPlaceholderContent,a=t.renderVideoIntoHostElement,l=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["aspectRatio","fullscreen","maintainAspectRatioInFullscreen","renderPlaceholderContent","renderVideoIntoHostElement"]);delete l.registerVideoHostElement,delete l.unregisterVideoHostElement;var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){$(e,t,n[t])})}return e}({display:"flex",justifyContent:"center",alignItems:"center",background:"#000"},l.style||{});return n&&this.containerWidth&&(!r||o)&&(c.height&&!this.warnedAboutStyleOverride&&(Object(g.logWarning)("VideoDisplay cannot use style.height prop because it is overridden by aspectRatio."),this.warnedAboutStyleOverride=!0),c.height=this.containerWidth/function(e){var t=e.split(":").map(Number);return t[0]/t[1]}(n)),s.a.createElement("div",Z({},l,{style:c,ref:function(t){return e.containerElement=t}}),this.hostedVideo?null:i({containerWidth:this.containerWidth,containerHeight:this.containerHeight,stealVideo:function(){return a(e.containerElement)},renderLastShownFrame:function(){return e.videoFrameAtTimeLastVacated&&s.a.createElement(te,{canvas:e.videoFrameAtTimeLastVacated,containerWidth:e.containerWidth})}}))},t}(i.PureComponent);ne.defaultProps={aspectRatio:"16:9",maintainAspectRatioInFullscreen:!1,renderPlaceholderContent:function(e){var t=e.containerWidth,n=e.containerHeight,r=e.renderLastShownFrame;return s.a.createElement("div",{style:{width:t,height:n,display:"flex",justifyContent:"center",alignItems:"center"}},r())}};var re=Object(g.playerContextFilter)(ne,["registerVideoHostElement","renderVideoIntoHostElement","unregisterVideoHostElement","fullscreen"]);n.d(t,"MaybeMarquee",function(){return v}),n.d(t,"ProgressBar",function(){return B}),n.d(t,"ProgressBarDisplay",function(){return k}),n.d(t,"MediaProgressBar",function(){return Y}),n.d(t,"MediaProgressBarDisplay",function(){return Q}),n.d(t,"VideoDisplay",function(){return re})}])});
//# sourceMappingURL=cassette-components.min.js.map